/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => QuickTagPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian5 = require("obsidian");

// src/utilities.ts
var import_obsidian4 = require("obsidian");

// src/modal.ts
var import_obsidian = require("obsidian");
var QuickTagSelector = class extends import_obsidian.FuzzySuggestModal {
  constructor(plugin, gatherer, fileList) {
    super(plugin.app);
    this.gatherer = gatherer;
    this.settings = plugin.settings;
    this.fileList = fileList;
    this.tag = "";
  }
  getItems() {
    if (!this.gatherer) {
      new import_obsidian.Notice("Error: Could not find tags!");
      return [];
    }
    var results = this.gatherer(this.settings, this.fileList);
    return results;
  }
  getItemText(tag) {
    return tag;
  }
  // this should be overwritten when called to hook into a promise's resolve
  async onChooseItem(tag) {
    this.tag = tag;
  }
};
var ConfirmModal = class extends import_obsidian.Modal {
  constructor(app2, onSubmit, message) {
    super(app2);
    this.onSubmit = onSubmit;
    this.message = message;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.createEl("h1", { text: this.message });
    new import_obsidian.Setting(contentEl).addButton((btn) => btn.setButtonText("Yes").setCta().onClick(() => {
      this.close();
      this.onSubmit(true);
    })).addButton((btn) => btn.setButtonText("No").setCta().onClick(() => {
      this.close();
      this.onSubmit(false);
    }));
  }
  async onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/tag_gatherers.ts
var import_obsidian2 = require("obsidian");
function getTagList(settings, fileList) {
  var tagSettings = getStarredTags(settings, "cut_in_line");
  var tag_array = tagSettings.map((e) => e.replace("#", "")).filter((e) => e).map((e) => "#" + e);
  if (!settings.all_tags) {
    return tag_array;
  }
  var tag_cache = getTagsFromAppCache();
  tag_cache.sort();
  tag_cache.forEach((tag) => {
    if (tag_array.indexOf(tag) == -1) {
      tag_array.push(tag);
    }
  });
  return tag_array;
}
function getTagsOnFiles(settings, fileList) {
  var tag_array = [];
  fileList.forEach((f) => {
    var cache = this.app.metadataCache.getFileCache(f);
    var new_tags = (0, import_obsidian2.parseFrontMatterTags)(cache.frontmatter);
    if (new_tags) {
      new_tags.map((e) => e.replace("#", "")).filter((e) => e).map((e) => "#" + e);
      new_tags.forEach((item) => {
        !tag_array.includes(item) ? tag_array.push(item) : void 0;
      });
    }
  });
  tag_array.push("REMOVE ALL");
  return tag_array;
}
function getNonStarredTags(settings, fileList) {
  var tag_array = getTagsFromAppCache();
  var starredTags = getStarredTags(settings);
  starredTags.forEach((t) => tag_array.remove(t));
  tag_array.sort();
  return tag_array;
}
function getStarredTags(settings, filter_key) {
  var results = [];
  settings.priorityTags.forEach((t) => {
    if (filter_key) {
      t[filter_key] ? results.push(t.tag_value) : null;
    } else {
      results.push(t.tag_value);
    }
  });
  return results;
}
function getTagsFromAppCache() {
  var results = [];
  for (const key in app.metadataCache.getTags()) {
    results.push(key);
  }
  return results;
}

// src/file_filters.ts
var import_obsidian3 = require("obsidian");
var SPECIAL_COMMANDS = ["REMOVE ALL"];
function getFilteredWithTag(fileList, tag) {
  if (SPECIAL_COMMANDS.includes(tag)) {
    return fileList;
  }
  var resultList = fileList.filter((file) => filterTag(file, tag) == true);
  return resultList;
}
function getFilteredWithoutTag(fileList, tag) {
  if (SPECIAL_COMMANDS.includes(tag)) {
    return fileList;
  }
  var resultList = fileList.filter((file) => filterTag(file, tag) == false);
  return resultList;
}
function filterTag(thisFile, tag) {
  var cache = this.app.metadataCache.getFileCache(thisFile);
  var existing_tags = (0, import_obsidian3.parseFrontMatterTags)(cache.frontmatter);
  if (existing_tags == null ? void 0 : existing_tags.includes(tag)) {
    return true;
  } else {
    return false;
  }
}
function onlyTaggableFiles(fileList) {
  var resultList = fileList.filter((file) => (file.extension ? true : false) == true && file.extension == "md");
  return resultList;
}

// src/utilities.ts
var tag_key = "tags";
var tag_cleanup = ["tag", "Tag", "Tags"];
var WOAH_LOTS_OF_FILES = 100;
function _getActiveFile() {
  var thisFile = this.app.workspace.getActiveFile();
  if (thisFile instanceof import_obsidian4.TFile) {
    return [thisFile];
  } else {
    new import_obsidian4.Notice("No file open!");
    return [];
  }
}
async function _addTag(thisFile, tag) {
  await _cleanFile(thisFile);
  await this.app.fileManager.processFrontMatter(thisFile, (frontmatter) => {
    frontmatter = _collectExistingTags(frontmatter);
    frontmatter[tag_key].push(tag);
  });
}
async function _removeTag(thisFile, tag) {
  await _cleanFile(thisFile);
  var processor = (frontmatter) => {
    frontmatter = _collectExistingTags(frontmatter);
    var tags = frontmatter[tag_key];
    var indx = tags.indexOf(tag, 0);
    if (indx > -1) {
      tags.splice(indx, 1);
    }
  };
  if (tag == "REMOVE ALL") {
    processor = (frontmatter) => {
      frontmatter[tag_key] = [];
    };
  }
  await this.app.fileManager.processFrontMatter(thisFile, processor);
}
function _toggleTags(files, tag) {
  var tag = tag.replace("#", "");
  var tag_added = 0;
  var tag_removed = 0;
  for (var i = 0; i < files.length; i++) {
    var exists = filterTag(files[i], `#${tag}`);
    if (!exists) {
      _addTag(files[i], tag);
      tag_added++;
    } else {
      _removeTag(files[i], tag);
      tag_removed++;
    }
  }
  return [tag_added, tag_removed];
}
async function _addTagToMany(files, tag, plugin) {
  console.log("ADDING TAGS");
  await _apply_bulk_changes(files, tag, plugin, _addTag);
}
async function _removeTagFromMany(files, tag, plugin) {
  console.log("REMOVING TAGS");
  await _apply_bulk_changes(files, tag, plugin, _removeTag);
}
async function _apply_bulk_changes(files, tag, plugin, func) {
  var logger = plugin.addStatusBarItem();
  logger.createEl("span");
  var useStatusBar = false;
  if (files.length > WOAH_LOTS_OF_FILES) {
    new import_obsidian4.Notice("Processing " + files.length + " files... This might take a while. See status bar for progress.");
    useStatusBar = true;
  }
  for (var i = 0; i < files.length; i++) {
    if (useStatusBar) {
      logger.setText(`Processing ${tag}: ${i + 1}/${files.length}`);
    }
    await func(files[i], tag);
  }
  logger.remove();
}
async function _cleanFile(f) {
  let text = await this.app.vault.read(f);
  var modified = false;
  if (text[0] == "\n") {
    while (text[0] == "\n") {
      text = text.slice(1);
    }
    modified = true;
  }
  if (text.indexOf("---\n") == 0) {
    var matches = text.match(/---\s*\n?/g);
    if (matches[1] != "---\n" && matches[1] != "---") {
      text = text.replace(matches[1], "---\n");
      modified = true;
    }
  }
  if (modified) {
    console.log(`fixing up broken parts of ${f.basename}'s yaml...`);
    await this.app.vault.modify(f, text);
  }
}
function _collectExistingTags(yml) {
  if (!yml.hasOwnProperty(tag_key)) {
    yml[tag_key] = [];
  } else {
    yml[tag_key] = _conformToArray(yml[tag_key]);
  }
  var alternate_keys = tag_cleanup.filter((v) => Object.keys(yml).includes(v));
  for (var i = 0; i < alternate_keys.length; i++) {
    var otherTags = _conformToArray(yml[alternate_keys[i]]);
    otherTags.forEach((tag) => {
      !yml[tag_key].includes(tag) ? yml[tag_key].push(tag) : console.log(tag + " already exists");
    });
    delete yml[alternate_keys[i]];
  }
  return yml;
}
function _conformToArray(input) {
  var output = typeof input === "string" ? input.split(",").map((e) => e.trim()) : input;
  if (output.length == 1) {
    output = output[0].split(" ").map((e) => e.trim());
  }
  return output ? output : [];
}
async function selectTag(plugin, gatherer, notes) {
  return new Promise((resolve) => {
    const modal = new QuickTagSelector(plugin, gatherer, notes ? notes : []);
    modal.onChooseItem = (tag) => {
      resolve(tag);
    };
    modal.open();
  });
}
function confirmationNotification(mode, tag, applicableFiles) {
  var notes = applicableFiles.length > 1 ? applicableFiles.length + " notes" : applicableFiles[0].basename;
  var tofrom = mode == "add" ? " added to " : " removed from ";
  if (tag == "REMOVE ALL") {
    new import_obsidian4.Notice("All tags removed from " + notes);
  } else {
    new import_obsidian4.Notice(tag + tofrom + notes);
  }
}
function dynamicToggleCommand(app2, plugin, StarredTag) {
  var tag = StarredTag.tag_value.replace("#", "");
  var commandId = `quick-add-tag:${tag}`;
  var fullId = `obsidian-quick-tagger:${commandId}`;
  var state = false;
  if (app2.commands.findCommand(fullId)) {
    delete app2.commands.commands[fullId];
    delete app2.commands.editorCommands[fullId];
  } else {
    plugin.addCommand({
      id: commandId,
      name: `Toggle #${tag}`,
      callback: () => {
        toggleTagOnActive(tag);
      }
    });
    state = true;
  }
  return state;
}
function dynamicAddMenuItems(menu, files, plugin) {
  var starredTags = plugin.settings.priorityTags;
  starredTags.forEach((t) => {
    if (t.right_click) {
      menu.addItem((item) => {
        item.setTitle(`Tag with ${t.tag_value}`).setIcon("tag").onClick(async () => {
          addTagsDirectly(plugin, files, t.tag_value);
        });
      });
    }
  });
}
async function addDialogs(mode, tag, quantity) {
  var verb = mode;
  var tofrom = mode == "add" ? " to " : " from ";
  var confirm = true;
  if (tag == "REMOVE ALL") {
    var msg = "This will delete all tags on the current note(s), are you sure?";
    await new Promise((resolve) => {
      new ConfirmModal(app, (result) => resolve(confirm = result), msg).open();
    });
    verb = "";
  }
  if (!confirm) {
    return confirm;
  }
  if (quantity && quantity > 1) {
    var msg = "You are about to " + verb + " " + tag + tofrom + quantity + " notes, are you sure?";
    await new Promise((resolve) => {
      new ConfirmModal(app, (result) => resolve(confirm = result), msg).open();
    });
  }
  return confirm;
}
async function addTagsWithModal(plugin, files) {
  var tag = await selectTag(plugin, getTagList, files);
  addTagsDirectly(plugin, files, tag);
}
async function addTagWithModal(plugin) {
  var currentFile = _getActiveFile();
  addTagsWithModal(plugin, currentFile);
}
async function removeTagsWithModal(plugin, files) {
  var tag = await selectTag(plugin, getTagsOnFiles, files);
  removeTagsDirectly(plugin, files, tag);
}
async function removeTagWithModal(plugin) {
  var currentFile = _getActiveFile();
  removeTagsWithModal(plugin, currentFile);
}
function toggleTagOnActive(tag) {
  var file = _getActiveFile();
  var tag_added = _toggleTags(file, tag);
  tag_added[0] ? confirmationNotification("add", tag, file) : confirmationNotification("remove", tag, file);
}
async function addTagsDirectly(plugin, files, tag) {
  var applicableFiles = getFilteredWithoutTag(files, tag);
  if (applicableFiles.length == 0) {
    new import_obsidian4.Notice("No file tags to change!");
    return;
  }
  var confirm = await addDialogs("add", tag, applicableFiles.length);
  if (confirm || applicableFiles.length == 1) {
    await _addTagToMany(applicableFiles, tag.replace("#", ""), plugin).then(
      () => confirmationNotification("add", tag, applicableFiles)
    );
  }
}
async function removeTagsDirectly(plugin, files, tag) {
  var applicableFiles = getFilteredWithTag(files, tag);
  if (applicableFiles.length == 0) {
    new import_obsidian4.Notice("No file tags to change!");
    return;
  }
  var confirm = await addDialogs("remove", tag, applicableFiles.length);
  if (confirm || applicableFiles.length == 1) {
    await _removeTagFromMany(applicableFiles, tag.replace("#", ""), plugin).then(
      () => confirmationNotification("remove", tag, applicableFiles)
    );
  }
}

// src/main.ts
var DEFAULT_SETTINGS = {
  all_tags: true,
  priorityTags: []
};
var QuickTagPlugin = class extends import_obsidian5.Plugin {
  async onload() {
    await this.loadSettings();
    var starredTags = this.settings.priorityTags;
    starredTags.forEach((t) => {
      if (t.add_command) {
        dynamicToggleCommand(app, this, t);
      }
    });
    this._statusBarItem = new Array();
    this.redrawButtons();
    const addTagRibbonIcon = this.addRibbonIcon("tag", "Add Tag to Current Note", async (evt) => {
      addTagWithModal(this);
    });
    const removeTagRibbonIcon = this.addRibbonIcon("x-square", "Remove Tag from Current Note", (evt) => {
      removeTagWithModal(this);
    });
    this.addCommand({
      id: "quick-add-tag",
      name: "Add Tag",
      callback: () => {
        addTagWithModal(this);
      }
    });
    this.addCommand({
      id: "open-quick-tagger",
      name: "Remove Tag",
      callback: () => {
        removeTagWithModal(this);
      }
    });
    this.registerEvent(
      this.app.workspace.on("files-menu", (menu, files) => {
        files = onlyTaggableFiles(files);
        if (files.length < 1) {
          return;
        }
        menu.addItem((item) => {
          item.setTitle("Tag " + files.length + " files with...").setIcon("tag").onClick(() => {
            addTagsWithModal(this, files);
          });
        });
      })
    );
    this.registerEvent(
      this.app.workspace.on("files-menu", (menu, files) => {
        if (files.length < 1) {
          return;
        }
        dynamicAddMenuItems(menu, files, this);
      })
    );
    this.registerEvent(
      this.app.workspace.on("files-menu", (menu, files) => {
        files = onlyTaggableFiles(files);
        if (files.length < 1) {
          return;
        }
        menu.addItem((item) => {
          item.setTitle("Remove Tag from " + files.length + " files...").setIcon("tag").onClick(() => {
            removeTagsWithModal(this, files);
          });
        });
      })
    );
    this.registerEvent(
      this.app.workspace.on("file-menu", (menu, file) => {
        var thisFile = onlyTaggableFiles([file]);
        if (thisFile.length < 1) {
          return;
        }
        menu.addItem((item) => {
          item.setTitle("Tag file with...").setIcon("tag").onClick(() => {
            addTagsWithModal(this, thisFile);
          });
        });
      })
    );
    this.registerEvent(
      this.app.workspace.on("file-menu", (menu, file) => {
        var thisFile = onlyTaggableFiles([file]);
        if (thisFile.length < 1) {
          return;
        }
        dynamicAddMenuItems(menu, thisFile, this);
      })
    );
    this.registerEvent(
      this.app.workspace.on("file-menu", (menu, file) => {
        var thisFile = onlyTaggableFiles([file]);
        if (thisFile.length < 1) {
          return;
        }
        menu.addItem((item) => {
          item.setTitle("Remove Tag(s)...").setIcon("tag").onClick(() => {
            removeTagsWithModal(this, thisFile);
          });
        });
      })
    );
    this.registerEvent(
      this.app.workspace.on("search:results-menu", (menu, leaf) => {
        var files = [];
        leaf.dom.vChildren.children.forEach((e) => files.push(e.file));
        files = onlyTaggableFiles(files);
        if (files.length < 1) {
          return;
        }
        menu.addItem((item) => {
          item.setTitle("Add Tags to " + files.length + " notes...").setIcon("tag").onClick(() => {
            addTagsWithModal(this, files);
          });
        });
      })
    );
    this.registerEvent(
      this.app.workspace.on("search:results-menu", (menu, leaf) => {
        var files = [];
        leaf.dom.vChildren.children.forEach((e) => files.push(e.file));
        files = onlyTaggableFiles(files);
        if (files.length < 1) {
          return;
        }
        dynamicAddMenuItems(menu, files, this);
      })
    );
    this.registerEvent(
      this.app.workspace.on("search:results-menu", (menu, leaf) => {
        var files = [];
        leaf.dom.vChildren.children.forEach((e) => files.push(e.file));
        files = onlyTaggableFiles(files);
        if (files.length < 1) {
          return;
        }
        menu.addItem((item) => {
          item.setTitle("Remove Tags from " + files.length + " notes...").setIcon("tag").onClick(() => {
            removeTagsWithModal(this, files);
          });
        });
      })
    );
    this.addSettingTab(new QuickTagSettingTab(this.app, this));
    this.registerDomEvent(document, "click", (evt) => {
      console.log("click", evt);
    });
    this.registerInterval(window.setInterval(() => console.log("setInterval"), 5 * 60 * 1e3));
  }
  onunload() {
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
  redrawButtons() {
    if (this._statusBarItem) {
      this._statusBarItem.forEach((t) => t.remove());
    }
    var starredTags = this.settings.priorityTags;
    starredTags.forEach(
      (t) => {
        if (t.status_bar) {
          var item_to_add = this.addStatusBarItem();
          this._statusBarItem.push(item_to_add);
          item_to_add.classList.add("mod-clickable");
          item_to_add.setText(t.tag_value);
          item_to_add.setAttribute("aria-label", `Toggle #${t.tag_value} on active note`);
          item_to_add.setAttribute("aria-label-position", "top");
          item_to_add.addEventListener("click", async () => {
            toggleTagOnActive(t.tag_value);
          });
        }
      }
    );
  }
};
var QuickTagSettingTab = class extends import_obsidian5.PluginSettingTab {
  constructor(app2, plugin) {
    super(app2, plugin);
    this.plugin = plugin;
    this.app = app2;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "Quick Tagger Settings" });
    new import_obsidian5.Setting(containerEl).setName("Use All Tags").setDesc("If disabled, only Starred Tags will be shown in the tag selection dialog.").addToggle((toggle) => toggle.setValue(this.plugin.settings.all_tags).onChange(async (value) => {
      this.plugin.settings.all_tags = value;
      await this.plugin.saveSettings();
    }));
    containerEl.createEl("h1", { text: "Starred Tags" });
    containerEl.createEl("h2", "hello");
    const starredDiv = containerEl.createDiv();
    this.drawPriorityTags(starredDiv);
    new import_obsidian5.Setting(containerEl).addButton((btn) => btn.setTooltip("Add a starred tag").onClick(async () => {
      let thisTag = await selectTag(this.plugin, getNonStarredTags);
      console.log("SETTING FUNCTION");
      this.plugin.settings.priorityTags.push({
        tag_value: thisTag,
        cut_in_line: true,
        add_command: false,
        status_bar: false,
        right_click: false
      });
      await this.plugin.saveSettings();
      this.drawPriorityTags(starredDiv);
    }).setIcon("plus"));
  }
  drawPriorityTags(div) {
    div.empty();
    const priorityTags = this.plugin.settings.priorityTags;
    new import_obsidian5.Setting(div).addButton((btn) => {
      btn.setIcon("star");
      var msg = "The first toggle on a starred tag moves it to the top of the list when selecting a tag for your notes.";
      btn.onClick(() => new import_obsidian5.Notice(msg, 6e3));
      btn.setTooltip(msg);
    }).addButton((btn) => {
      btn.setIcon("chevron-right-square");
      var msg = "The second toggle on a starred tag adds a command for it so you can create a hotkey, etc.  --- NOT IMPLEMENTED";
      btn.onClick(() => new import_obsidian5.Notice(msg, 6e3));
      btn.setTooltip(msg);
    }).addButton((btn) => {
      btn.setIcon("martini");
      var msg = "The third toggle on a starred tag adds a button for it to the status bar.  --- NOT IMPLEMENTED";
      btn.onClick(() => new import_obsidian5.Notice(msg, 6e3));
      btn.setTooltip(msg);
    }).addButton((btn) => {
      btn.setIcon("mouse-pointer-click");
      var msg = "The fourth toggle on a starred tag adds it to the context menu.  --- NOT IMPLEMENTED";
      btn.onClick(() => new import_obsidian5.Notice(msg, 6e3));
      btn.setTooltip(msg);
    }).addButton((btn) => {
      btn.setIcon("up-arrow-with-tail");
      var msg = "The up arrow button moves the starred tag up on the starred tag list. This affects the order it's displayed in the tag selection dialog.";
      btn.onClick(() => new import_obsidian5.Notice(msg, 6e3));
      btn.setTooltip(msg);
    }).addButton((btn) => {
      btn.setIcon("down-arrow-with-tail");
      var msg = "The down arrow button moves the starred tag down on the starred tag list. This affects the order it's displayed in the tag selection dialog.";
      btn.onClick(() => new import_obsidian5.Notice(msg, 6e3));
      btn.setTooltip(msg);
    }).addButton((btn) => {
      btn.setIcon("trash");
      var msg = "The trash can button removes the starred tag from the starred list.";
      btn.onClick(() => new import_obsidian5.Notice(msg, 6e3));
      btn.setTooltip(msg);
    }).nameEl.setText("Starred tags get special treatment. Click or hover over these buttons for more details \u{1F449}");
    priorityTags.forEach((tag, i) => {
      const s = new import_obsidian5.Setting(div).addToggle((toggle) => {
        toggle.setValue(tag.cut_in_line).onChange(async (value) => {
          tag.cut_in_line = value;
          await this.plugin.saveSettings();
          new import_obsidian5.Notice(tag.cut_in_line ? `Added ${tag.tag_value} to priority section of selector dialog` : `Removed ${tag.tag_value} from priority section of selector dialog`);
        });
        toggle.setTooltip("Show first in tag selection dialog");
      }).addToggle((toggle) => {
        toggle.setValue(tag.add_command).onChange(async (value) => {
          tag.add_command = value;
          await this.plugin.saveSettings();
          dynamicToggleCommand(this.app, this.plugin, tag);
          new import_obsidian5.Notice(tag.add_command ? `Added ${tag.tag_value} command` : `Removed ${tag.tag_value} command`);
        });
        toggle.setTooltip("Add command for this tag");
      }).addToggle((toggle) => {
        toggle.setValue(tag.status_bar).onChange(async (value) => {
          tag.status_bar = value;
          await this.plugin.saveSettings();
          new import_obsidian5.Notice(tag.status_bar ? `Added ${tag.tag_value} button to status bar` : `Removed ${tag.tag_value} button from status bar`);
          this.plugin.redrawButtons();
        });
        toggle.setTooltip("Add button to status bar");
      }).addToggle((toggle) => {
        toggle.setValue(tag.right_click).onChange(async (value) => {
          tag.right_click = value;
          await this.plugin.saveSettings();
          new import_obsidian5.Notice(tag.right_click ? `Added ${tag.tag_value} to right-click menu` : `Removed ${tag.tag_value} from right-click menu`);
        });
        toggle.setTooltip("Add context menu entry");
      }).addButton((button) => {
        button.onClick(async () => {
          const oldTag = priorityTags[i - 1];
          priorityTags[i - 1] = tag;
          priorityTags[i] = oldTag;
          this.drawPriorityTags(div);
          await this.plugin.saveSettings();
          this.plugin.redrawButtons();
        });
        button.setIcon("up-arrow-with-tail");
        button.setTooltip("Move Starred Tag up");
        if (i === 0) {
          button.setDisabled(true);
        }
      }).addButton((button) => {
        button.onClick(async () => {
          const oldTag = priorityTags[i + 1];
          priorityTags[i + 1] = tag;
          priorityTags[i] = oldTag;
          this.drawPriorityTags(div);
          await this.plugin.saveSettings();
          this.plugin.redrawButtons();
        });
        button.setIcon("down-arrow-with-tail");
        button.setTooltip("Move Starred Tag down");
        if (i === priorityTags.length - 1) {
          button.setDisabled(true);
        }
      }).addButton((btn) => {
        btn.onClick(async () => {
          priorityTags.remove(tag);
          await this.plugin.saveSettings();
          this.drawPriorityTags(div);
        });
        btn.setIcon("trash");
        btn.setTooltip("Remove this Tag");
      });
      s.nameEl.innerHTML = tag.tag_value;
    });
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAic3JjL3V0aWxpdGllcy50cyIsICJzcmMvbW9kYWwudHMiLCAic3JjL3RhZ19nYXRoZXJlcnMudHMiLCAic3JjL2ZpbGVfZmlsdGVycy50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgQXBwLCBOb3RpY2UsIFBsdWdpbiwgVEZpbGUsIFBsdWdpblNldHRpbmdUYWIsIFNldHRpbmcgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7IGR5bmFtaWNUb2dnbGVDb21tYW5kLCBkeW5hbWljQWRkTWVudUl0ZW1zLCBhZGRUYWdzV2l0aE1vZGFsLCBhZGRUYWdXaXRoTW9kYWwsXHJcblx0dG9nZ2xlVGFnT25BY3RpdmUsIHNlbGVjdFRhZywgcmVtb3ZlVGFnV2l0aE1vZGFsLCByZW1vdmVUYWdzV2l0aE1vZGFsIH0gZnJvbSAnLi91dGlsaXRpZXMnO1xyXG5pbXBvcnQgeyBnZXROb25TdGFycmVkVGFncyB9IGZyb20gJy4vdGFnX2dhdGhlcmVycyc7XHJcbmltcG9ydCB7IG9ubHlUYWdnYWJsZUZpbGVzIH0gZnJvbSAnLi9maWxlX2ZpbHRlcnMnO1xyXG5cclxuXHJcbi8qKiBpbnRlcmZhY2UgZm9yIHN0YXJyZWQgdGFnIHNldHRpbmdzXHJcbiAqIFxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBTdGFycmVkVGFnIHtcclxuXHR0YWdfdmFsdWU6IHN0cmluZztcclxuXHRjdXRfaW5fbGluZTogYm9vbGVhbjtcclxuXHRzdGF0dXNfYmFyOiBib29sZWFuO1xyXG5cdGFkZF9jb21tYW5kOiBib29sZWFuO1xyXG5cdHJpZ2h0X2NsaWNrOiBib29sZWFuO1xyXG59XHJcblxyXG4vKiogaW50ZXJmYWNlIGZvciBwbHVnaW4gc2V0dGluZ3MgYXMgYSB3aG9sZVxyXG4gKiBcclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgUXVpY2tUYWdnZXJTZXR0aW5ncyB7XHJcblx0YWxsX3RhZ3M6IGJvb2xlYW47XHJcblx0cHJpb3JpdHlUYWdzOiBTdGFycmVkVGFnW107XHJcbn1cclxuXHJcbi8qKiBkZWZhdWx0IHNldHRpbmdzIGZvciB3aGVuIG5vbmUgZXhpc3RcclxuICogXHJcbiAqL1xyXG5jb25zdCBERUZBVUxUX1NFVFRJTkdTOiBRdWlja1RhZ2dlclNldHRpbmdzID0ge1xyXG5cdGFsbF90YWdzOiB0cnVlLFxyXG5cdHByaW9yaXR5VGFnczogW11cclxufVxyXG5cclxuXHJcbi8qKiBNYWluIGNsYXNzIGZvciBwbHVnaW5cclxuICogXHJcbiAqL1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBRdWlja1RhZ1BsdWdpbiBleHRlbmRzIFBsdWdpbiB7XHJcblx0c2V0dGluZ3M6IFF1aWNrVGFnZ2VyU2V0dGluZ3M7XHJcblx0X3N0YXR1c0Jhckl0ZW06IEhUTUxFbGVtZW50W11cclxuXHJcblx0YXN5bmMgb25sb2FkKCkge1xyXG5cdFx0YXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcclxuXHRcdFxyXG5cdFx0Ly8gQWRkIER5bmFtaWMgY29tbWFuZHMvc3RhdHVzIGJhciBidXR0b25zXHJcblx0XHR2YXIgc3RhcnJlZFRhZ3MgPSB0aGlzLnNldHRpbmdzLnByaW9yaXR5VGFnc1xyXG5cdFx0c3RhcnJlZFRhZ3MuZm9yRWFjaCgodCkgPT4ge1xyXG5cdFx0XHRpZih0LmFkZF9jb21tYW5kKXtcclxuXHRcdFx0XHRkeW5hbWljVG9nZ2xlQ29tbWFuZChhcHAsIHRoaXMsIHQpXHJcblx0XHRcdH1cclxuXHRcdH0pXHJcblxyXG5cdFx0dGhpcy5fc3RhdHVzQmFySXRlbSA9IG5ldyBBcnJheVxyXG5cdFx0dGhpcy5yZWRyYXdCdXR0b25zKClcclxuXHJcblx0XHQvLyBSaWJib24gSWNvbnNcclxuXHRcdGNvbnN0IGFkZFRhZ1JpYmJvbkljb24gPSB0aGlzLmFkZFJpYmJvbkljb24oJ3RhZycsICdBZGQgVGFnIHRvIEN1cnJlbnQgTm90ZScsIGFzeW5jIChldnQ6IE1vdXNlRXZlbnQpID0+IHtcclxuXHRcdFx0YWRkVGFnV2l0aE1vZGFsKHRoaXMpXHJcblx0XHR9KTtcclxuXHJcblx0XHRjb25zdCByZW1vdmVUYWdSaWJib25JY29uID0gdGhpcy5hZGRSaWJib25JY29uKCd4LXNxdWFyZScsICdSZW1vdmUgVGFnIGZyb20gQ3VycmVudCBOb3RlJywgKGV2dDogTW91c2VFdmVudCkgPT4ge1xyXG5cdFx0XHRyZW1vdmVUYWdXaXRoTW9kYWwodGhpcylcclxuXHRcdH0pO1xyXG5cclxuXHJcblx0XHQvLyBDb21tYW5kIFBhbGxldCBDb21tYW5kc1xyXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcclxuXHRcdFx0aWQ6ICdxdWljay1hZGQtdGFnJyxcclxuXHRcdFx0bmFtZTogJ0FkZCBUYWcnLFxyXG5cdFx0XHRjYWxsYmFjazogKCkgPT4ge1xyXG5cdFx0XHRcdGFkZFRhZ1dpdGhNb2RhbCh0aGlzKVxyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHJcblx0XHR0aGlzLmFkZENvbW1hbmQoe1xyXG5cdFx0XHRpZDogJ29wZW4tcXVpY2stdGFnZ2VyJyxcclxuXHRcdFx0bmFtZTogJ1JlbW92ZSBUYWcnLFxyXG5cdFx0XHRjYWxsYmFjazogKCkgPT4ge1xyXG5cdFx0XHRcdHJlbW92ZVRhZ1dpdGhNb2RhbCh0aGlzKVxyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBGaWxlIENvbnRleHQgbWVudSBjb21tYW5kc1xyXG5cdFx0dGhpcy5yZWdpc3RlckV2ZW50KFxyXG5cdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2Uub24oXCJmaWxlcy1tZW51XCIsIChtZW51LCBmaWxlcykgPT4ge1xyXG5cdFx0XHRcdGZpbGVzID0gb25seVRhZ2dhYmxlRmlsZXMoZmlsZXMpXHJcblx0XHRcdFx0aWYoZmlsZXMubGVuZ3RoIDwgMSl7cmV0dXJufVxyXG5cdFx0XHRcdG1lbnUuYWRkSXRlbSgoaXRlbSkgPT57XHJcblx0XHRcdFx0XHRpdGVtXHJcblx0XHRcdFx0XHQgIC5zZXRUaXRsZShcIlRhZyBcIiArIGZpbGVzLmxlbmd0aCArIFwiIGZpbGVzIHdpdGguLi5cIilcclxuXHRcdFx0XHRcdCAgLnNldEljb24oXCJ0YWdcIilcclxuXHRcdFx0XHRcdCAgLm9uQ2xpY2soKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRhZGRUYWdzV2l0aE1vZGFsKHRoaXMsIGZpbGVzKVxyXG5cdFx0XHRcdFx0ICB9KVxyXG5cdFx0XHRcdH0pXHJcblx0XHRcdH0pXHJcblx0XHQpXHJcblxyXG5cdFx0dGhpcy5yZWdpc3RlckV2ZW50KFxyXG5cdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2Uub24oJ2ZpbGVzLW1lbnUnLCAobWVudSwgZmlsZXMpID0+IHtcclxuXHRcdFx0XHRpZihmaWxlcy5sZW5ndGggPCAxKXtyZXR1cm59XHJcblx0XHRcdFx0ZHluYW1pY0FkZE1lbnVJdGVtcyhtZW51LCBmaWxlcywgdGhpcylcclxuXHRcdFx0fSlcclxuXHRcdClcclxuXHJcblx0XHR0aGlzLnJlZ2lzdGVyRXZlbnQoXHJcblx0XHRcdHRoaXMuYXBwLndvcmtzcGFjZS5vbihcImZpbGVzLW1lbnVcIiwgKG1lbnUsIGZpbGVzKSA9PiB7XHJcblx0XHRcdFx0ZmlsZXMgPSBvbmx5VGFnZ2FibGVGaWxlcyhmaWxlcylcclxuXHRcdFx0XHRpZihmaWxlcy5sZW5ndGggPCAxKXtyZXR1cm59XHJcblx0XHRcdFx0bWVudS5hZGRJdGVtKChpdGVtKSA9PntcclxuXHRcdFx0XHRcdGl0ZW1cclxuXHRcdFx0XHRcdCAgLnNldFRpdGxlKFwiUmVtb3ZlIFRhZyBmcm9tIFwiICsgZmlsZXMubGVuZ3RoICsgXCIgZmlsZXMuLi5cIilcclxuXHRcdFx0XHRcdCAgLnNldEljb24oXCJ0YWdcIilcclxuXHRcdFx0XHRcdCAgLm9uQ2xpY2soKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRyZW1vdmVUYWdzV2l0aE1vZGFsKHRoaXMsIGZpbGVzKVxyXG5cdFx0XHRcdFx0ICB9KVxyXG5cdFx0XHRcdH0pXHJcblx0XHRcdH0pXHJcblx0XHQpXHJcblxyXG5cdFx0dGhpcy5yZWdpc3RlckV2ZW50KFxyXG5cdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2Uub24oXCJmaWxlLW1lbnVcIiwgKG1lbnUsIGZpbGUpID0+IHtcclxuXHRcdFx0XHR2YXIgdGhpc0ZpbGUgPSBvbmx5VGFnZ2FibGVGaWxlcyhbZmlsZV0pXHJcblx0XHRcdFx0aWYodGhpc0ZpbGUubGVuZ3RoIDwgMSl7cmV0dXJufVxyXG5cdFx0XHRcdG1lbnUuYWRkSXRlbSgoaXRlbSkgPT57XHJcblx0XHRcdFx0XHRpdGVtXHJcblx0XHRcdFx0XHQgIC5zZXRUaXRsZShcIlRhZyBmaWxlIHdpdGguLi5cIilcclxuXHRcdFx0XHRcdCAgLnNldEljb24oXCJ0YWdcIilcclxuXHRcdFx0XHRcdCAgLm9uQ2xpY2soKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRhZGRUYWdzV2l0aE1vZGFsKHRoaXMsIHRoaXNGaWxlKVxyXG5cdFx0XHRcdFx0ICB9KVxyXG5cdFx0XHRcdH0pXHJcblx0XHRcdH0pXHJcblx0XHQpXHJcblxyXG5cdFx0dGhpcy5yZWdpc3RlckV2ZW50KFxyXG5cdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2Uub24oJ2ZpbGUtbWVudScsIChtZW51LCBmaWxlKSA9PiB7XHJcblx0XHRcdFx0dmFyIHRoaXNGaWxlID0gb25seVRhZ2dhYmxlRmlsZXMoW2ZpbGVdKVxyXG5cdFx0XHRcdGlmKHRoaXNGaWxlLmxlbmd0aCA8IDEpe3JldHVybn1cclxuXHRcdFx0XHRkeW5hbWljQWRkTWVudUl0ZW1zKG1lbnUsIHRoaXNGaWxlLCB0aGlzKVxyXG5cdFx0XHR9KVxyXG5cdFx0KVxyXG5cclxuXHRcdHRoaXMucmVnaXN0ZXJFdmVudChcclxuXHRcdFx0dGhpcy5hcHAud29ya3NwYWNlLm9uKFwiZmlsZS1tZW51XCIsIChtZW51LCBmaWxlKSA9PiB7XHJcblx0XHRcdFx0dmFyIHRoaXNGaWxlID0gb25seVRhZ2dhYmxlRmlsZXMoW2ZpbGVdKVxyXG5cdFx0XHRcdGlmKHRoaXNGaWxlLmxlbmd0aCA8IDEpe3JldHVybn1cclxuXHRcdFx0XHRtZW51LmFkZEl0ZW0oKGl0ZW0pID0+e1xyXG5cdFx0XHRcdFx0aXRlbVxyXG5cdFx0XHRcdFx0ICAuc2V0VGl0bGUoXCJSZW1vdmUgVGFnKHMpLi4uXCIpXHJcblx0XHRcdFx0XHQgIC5zZXRJY29uKFwidGFnXCIpXHJcblx0XHRcdFx0XHQgIC5vbkNsaWNrKCgpID0+IHtcclxuXHRcdFx0XHRcdFx0cmVtb3ZlVGFnc1dpdGhNb2RhbCh0aGlzLCB0aGlzRmlsZSlcclxuXHRcdFx0XHRcdCAgfSlcclxuXHRcdFx0XHR9KVxyXG5cdFx0XHR9KVxyXG5cdFx0KVxyXG5cclxuXHRcdC8vIFNlYXJjaCBSZXN1bHRzIG1lbnUgY29tbWFuZHNcclxuXHRcdHRoaXMucmVnaXN0ZXJFdmVudChcclxuXHRcdFx0dGhpcy5hcHAud29ya3NwYWNlLm9uKFwic2VhcmNoOnJlc3VsdHMtbWVudVwiLCAobWVudSwgbGVhZikgPT4ge1xyXG5cdFx0XHRcdHZhciBmaWxlcyA9IFtdIGFzIFRGaWxlW11cclxuXHRcdFx0XHRsZWFmLmRvbS52Q2hpbGRyZW4uY2hpbGRyZW4uZm9yRWFjaCgoZSkgPT4gZmlsZXMucHVzaChlLmZpbGUpKSAgLy8gVE9ETzogdGhlcmUgbXVzdCBiZSBhIGJldHRlciB3YXkgdG8gZG8gdGhpc1xyXG5cdFx0XHRcdGZpbGVzID0gb25seVRhZ2dhYmxlRmlsZXMoZmlsZXMpXHJcblx0XHRcdFx0aWYoZmlsZXMubGVuZ3RoIDwgMSl7cmV0dXJufVxyXG5cclxuXHRcdFx0XHRtZW51LmFkZEl0ZW0oKGl0ZW0pID0+e1xyXG5cdFx0XHRcdFx0aXRlbVxyXG5cdFx0XHRcdFx0ICAuc2V0VGl0bGUoXCJBZGQgVGFncyB0byBcIiArIGZpbGVzLmxlbmd0aCArIFwiIG5vdGVzLi4uXCIpXHJcblx0XHRcdFx0XHQgIC5zZXRJY29uKFwidGFnXCIpXHJcblx0XHRcdFx0XHQgIC5vbkNsaWNrKCgpID0+IHtcclxuXHRcdFx0XHRcdFx0YWRkVGFnc1dpdGhNb2RhbCh0aGlzLCBmaWxlcylcclxuXHRcdFx0XHRcdCAgfSlcclxuXHRcdFx0XHR9KVxyXG5cdFx0XHR9KVxyXG5cdFx0KVxyXG5cclxuXHRcdHRoaXMucmVnaXN0ZXJFdmVudChcclxuXHRcdFx0dGhpcy5hcHAud29ya3NwYWNlLm9uKFwic2VhcmNoOnJlc3VsdHMtbWVudVwiLCAobWVudSwgbGVhZikgPT4ge1xyXG5cdFx0XHRcdHZhciBmaWxlcyA9IFtdIGFzIFRGaWxlW11cclxuXHRcdFx0XHRsZWFmLmRvbS52Q2hpbGRyZW4uY2hpbGRyZW4uZm9yRWFjaCgoZSkgPT4gZmlsZXMucHVzaChlLmZpbGUpKSAgLy8gVE9ETzogdGhlcmUgbXVzdCBiZSBhIGJldHRlciB3YXkgdG8gZG8gdGhpc1xyXG5cdFx0XHRcdGZpbGVzID0gb25seVRhZ2dhYmxlRmlsZXMoZmlsZXMpXHJcblx0XHRcdFx0aWYoZmlsZXMubGVuZ3RoIDwgMSl7cmV0dXJufVxyXG5cclxuXHRcdFx0XHRkeW5hbWljQWRkTWVudUl0ZW1zKG1lbnUsIGZpbGVzLCB0aGlzKVxyXG5cdFx0XHR9KVxyXG5cdFx0KVxyXG5cclxuXHRcdHRoaXMucmVnaXN0ZXJFdmVudChcclxuXHRcdFx0dGhpcy5hcHAud29ya3NwYWNlLm9uKFwic2VhcmNoOnJlc3VsdHMtbWVudVwiLCAobWVudSwgbGVhZikgPT4ge1xyXG5cdFx0XHRcdHZhciBmaWxlcyA9IFtdIGFzIFRGaWxlW11cclxuXHRcdFx0XHRsZWFmLmRvbS52Q2hpbGRyZW4uY2hpbGRyZW4uZm9yRWFjaCgoZSkgPT4gZmlsZXMucHVzaChlLmZpbGUpKSAgLy8gVE9ETzogdGhlcmUgbXVzdCBiZSBhIGJldHRlciB3YXkgdG8gZG8gdGhpc1xyXG5cdFx0XHRcdGZpbGVzID0gb25seVRhZ2dhYmxlRmlsZXMoZmlsZXMpXHJcblx0XHRcdFx0aWYoZmlsZXMubGVuZ3RoIDwgMSl7cmV0dXJufVxyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdG1lbnUuYWRkSXRlbSgoaXRlbSkgPT57XHJcblx0XHRcdFx0XHRpdGVtXHJcblx0XHRcdFx0XHQgIC5zZXRUaXRsZShcIlJlbW92ZSBUYWdzIGZyb20gXCIgKyBmaWxlcy5sZW5ndGggKyBcIiBub3Rlcy4uLlwiKVxyXG5cdFx0XHRcdFx0ICAuc2V0SWNvbihcInRhZ1wiKVxyXG5cdFx0XHRcdFx0ICAub25DbGljaygoKSA9PiB7XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdHJlbW92ZVRhZ3NXaXRoTW9kYWwodGhpcywgZmlsZXMpXHJcblx0XHRcdFx0XHQgIH0pXHJcblx0XHRcdFx0fSlcclxuXHRcdFx0fSlcclxuXHRcdClcclxuXHJcblx0XHQvLyBUaGlzIGFkZHMgYSBzZXR0aW5ncyB0YWIgc28gdGhlIHVzZXIgY2FuIGNvbmZpZ3VyZSB2YXJpb3VzIGFzcGVjdHMgb2YgdGhlIHBsdWdpblxyXG5cdFx0dGhpcy5hZGRTZXR0aW5nVGFiKG5ldyBRdWlja1RhZ1NldHRpbmdUYWIodGhpcy5hcHAsIHRoaXMpKTtcclxuXHJcblx0XHQvLyBJZiB0aGUgcGx1Z2luIGhvb2tzIHVwIGFueSBnbG9iYWwgRE9NIGV2ZW50cyAob24gcGFydHMgb2YgdGhlIGFwcCB0aGF0IGRvZXNuJ3QgYmVsb25nIHRvIHRoaXMgcGx1Z2luKVxyXG5cdFx0Ly8gVXNpbmcgdGhpcyBmdW5jdGlvbiB3aWxsIGF1dG9tYXRpY2FsbHkgcmVtb3ZlIHRoZSBldmVudCBsaXN0ZW5lciB3aGVuIHRoaXMgcGx1Z2luIGlzIGRpc2FibGVkLlxyXG5cdFx0dGhpcy5yZWdpc3RlckRvbUV2ZW50KGRvY3VtZW50LCAnY2xpY2snLCAoZXZ0OiBNb3VzZUV2ZW50KSA9PiB7XHJcblx0XHRcdGNvbnNvbGUubG9nKCdjbGljaycsIGV2dCk7XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBXaGVuIHJlZ2lzdGVyaW5nIGludGVydmFscywgdGhpcyBmdW5jdGlvbiB3aWxsIGF1dG9tYXRpY2FsbHkgY2xlYXIgdGhlIGludGVydmFsIHdoZW4gdGhlIHBsdWdpbiBpcyBkaXNhYmxlZC5cclxuXHRcdHRoaXMucmVnaXN0ZXJJbnRlcnZhbCh3aW5kb3cuc2V0SW50ZXJ2YWwoKCkgPT4gY29uc29sZS5sb2coJ3NldEludGVydmFsJyksIDUgKiA2MCAqIDEwMDApKTtcclxuXHR9XHJcblxyXG5cdG9udW5sb2FkKCkge1xyXG5cclxuXHR9XHJcblxyXG5cdGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcclxuXHRcdHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1NFVFRJTkdTLCBhd2FpdCB0aGlzLmxvYWREYXRhKCkpO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgc2F2ZVNldHRpbmdzKCkge1xyXG5cdFx0YXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcclxuXHR9XHJcblxyXG5cdHJlZHJhd0J1dHRvbnMoKXtcclxuXHRcdGlmICh0aGlzLl9zdGF0dXNCYXJJdGVtKSB7XHJcblx0XHRcdHRoaXMuX3N0YXR1c0Jhckl0ZW0uZm9yRWFjaCgodCkgPT4gdC5yZW1vdmUoKSlcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0dmFyIHN0YXJyZWRUYWdzID0gdGhpcy5zZXR0aW5ncy5wcmlvcml0eVRhZ3NcclxuXHRcdHN0YXJyZWRUYWdzLmZvckVhY2goKHQpID0+IHtcclxuXHRcdFx0aWYgKHQuc3RhdHVzX2Jhcil7XHJcblx0XHRcdFx0dmFyIGl0ZW1fdG9fYWRkID0gdGhpcy5hZGRTdGF0dXNCYXJJdGVtKClcclxuXHRcdFx0XHR0aGlzLl9zdGF0dXNCYXJJdGVtLnB1c2goaXRlbV90b19hZGQpXHJcblx0XHRcdFx0aXRlbV90b19hZGQuY2xhc3NMaXN0LmFkZChcIm1vZC1jbGlja2FibGVcIilcclxuXHRcdFx0XHRpdGVtX3RvX2FkZC5zZXRUZXh0KHQudGFnX3ZhbHVlKVxyXG5cdFx0XHRcdGl0ZW1fdG9fYWRkLnNldEF0dHJpYnV0ZShcImFyaWEtbGFiZWxcIiwgYFRvZ2dsZSAjJHt0LnRhZ192YWx1ZX0gb24gYWN0aXZlIG5vdGVgKTtcclxuXHRcdFx0XHRpdGVtX3RvX2FkZC5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsLXBvc2l0aW9uXCIsIFwidG9wXCIpO1xyXG5cdFx0XHRcdGl0ZW1fdG9fYWRkLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHR0b2dnbGVUYWdPbkFjdGl2ZSh0LnRhZ192YWx1ZSlcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0KVxyXG5cdH1cclxufVxyXG5cclxuXHJcbi8qKiBDbGFzcyBmb3Igc2V0dGluZ3MgdGFiLiBEcmF3cyBhbmQgc2V0cyB1cCBzZXR0aW5nc1xyXG4gKiBcclxuICovXHJcbmNsYXNzIFF1aWNrVGFnU2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xyXG5cdHBsdWdpbjogUXVpY2tUYWdQbHVnaW47XHJcblxyXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IFF1aWNrVGFnUGx1Z2luKSB7XHJcblx0XHRzdXBlcihhcHAsIHBsdWdpbik7XHJcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcclxuXHRcdHRoaXMuYXBwID0gYXBwO1xyXG5cdH1cclxuXHJcblx0ZGlzcGxheSgpOiB2b2lkIHtcclxuXHRcdGNvbnN0IHtjb250YWluZXJFbH0gPSB0aGlzO1xyXG5cclxuXHRcdGNvbnRhaW5lckVsLmVtcHR5KCk7XHJcblxyXG5cdFx0Y29udGFpbmVyRWwuY3JlYXRlRWwoJ2gyJywge3RleHQ6ICdRdWljayBUYWdnZXIgU2V0dGluZ3MnfSk7XHJcblxyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHRcdC5zZXROYW1lKCdVc2UgQWxsIFRhZ3MnKVxyXG5cdFx0XHQuc2V0RGVzYygnSWYgZGlzYWJsZWQsIG9ubHkgU3RhcnJlZCBUYWdzIHdpbGwgYmUgc2hvd24gaW4gdGhlIHRhZyBzZWxlY3Rpb24gZGlhbG9nLicpXHJcblx0XHRcdC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxyXG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5hbGxfdGFncylcclxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5hbGxfdGFncyA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdH0pKTtcclxuXHJcblx0XHRjb250YWluZXJFbC5jcmVhdGVFbCgnaDEnLCB7IHRleHQ6ICdTdGFycmVkIFRhZ3MnIH0pO1xyXG5cdFx0Y29udGFpbmVyRWwuY3JlYXRlRWwoJ2gyJywgXCJoZWxsb1wiKVxyXG5cclxuXHRcdGNvbnN0IHN0YXJyZWREaXYgPSBjb250YWluZXJFbC5jcmVhdGVEaXYoKTtcclxuXHRcdHRoaXMuZHJhd1ByaW9yaXR5VGFncyhzdGFycmVkRGl2KTtcclxuXHRcdFxyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHQgICAgLmFkZEJ1dHRvbihidG4gPT4gYnRuXHJcblx0XHRcdCAgICAuc2V0VG9vbHRpcChcIkFkZCBhIHN0YXJyZWQgdGFnXCIpXHJcblx0XHRcdFx0Lm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0bGV0IHRoaXNUYWcgPSBhd2FpdCBzZWxlY3RUYWcodGhpcy5wbHVnaW4sIGdldE5vblN0YXJyZWRUYWdzKVxyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhcIlNFVFRJTkcgRlVOQ1RJT05cIilcclxuXHRcdFx0XHRcdC8vIGNvbnNvbGUubG9nKHNlbGVjdGVkVGFnKVxyXG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MucHJpb3JpdHlUYWdzLnB1c2goe1xyXG5cdFx0XHRcdFx0XHR0YWdfdmFsdWU6IHRoaXNUYWcsXHJcblx0XHRcdFx0XHRcdGN1dF9pbl9saW5lOiB0cnVlLFxyXG5cdFx0XHRcdFx0XHRhZGRfY29tbWFuZDogZmFsc2UsXHJcblx0XHRcdFx0XHRcdHN0YXR1c19iYXI6IGZhbHNlLFxyXG5cdFx0XHRcdFx0XHRyaWdodF9jbGljazogZmFsc2VcclxuXHRcdFx0XHRcdH0pXHJcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdHRoaXMuZHJhd1ByaW9yaXR5VGFncyhzdGFycmVkRGl2KVxyXG5cdFx0XHRcdH0pXHJcblx0XHRcdFx0LnNldEljb24oXCJwbHVzXCIpKVxyXG5cdH1cclxuXHJcblx0ZHJhd1ByaW9yaXR5VGFncyhkaXY6IEhUTUxFbGVtZW50KSB7XHJcblx0XHRkaXYuZW1wdHkoKTtcclxuXHRcdGNvbnN0IHByaW9yaXR5VGFncyA9IHRoaXMucGx1Z2luLnNldHRpbmdzLnByaW9yaXR5VGFnc1xyXG5cclxuXHRcdG5ldyBTZXR0aW5nKGRpdilcclxuXHRcdC5hZGRCdXR0b24oYnRuID0+IHtcclxuXHRcdFx0YnRuLnNldEljb24oJ3N0YXInKTtcclxuXHRcdFx0dmFyIG1zZyA9IFwiVGhlIGZpcnN0IHRvZ2dsZSBvbiBhIHN0YXJyZWQgdGFnIG1vdmVzIGl0IHRvIHRoZSB0b3Agb2YgdGhlIGxpc3Qgd2hlbiBzZWxlY3RpbmcgYSB0YWcgZm9yIHlvdXIgbm90ZXMuXCI7XHJcblx0XHRcdGJ0bi5vbkNsaWNrKCgpID0+IG5ldyBOb3RpY2UobXNnLDYwMDApKVxyXG5cdFx0XHRidG4uc2V0VG9vbHRpcChtc2cpXHJcblx0XHR9KVxyXG5cdFx0LmFkZEJ1dHRvbihidG4gPT4ge2J0bi5zZXRJY29uKCdjaGV2cm9uLXJpZ2h0LXNxdWFyZScpO1xyXG5cdFx0XHR2YXIgbXNnID0gXCJUaGUgc2Vjb25kIHRvZ2dsZSBvbiBhIHN0YXJyZWQgdGFnIGFkZHMgYSBjb21tYW5kIGZvciBpdCBzbyB5b3UgY2FuIGNyZWF0ZSBhIGhvdGtleSwgZXRjLiAgLS0tIE5PVCBJTVBMRU1FTlRFRFwiO1xyXG5cdFx0XHRidG4ub25DbGljaygoKSA9PiBuZXcgTm90aWNlKG1zZyw2MDAwKSlcclxuXHRcdFx0YnRuLnNldFRvb2x0aXAobXNnKVxyXG5cdFx0fSlcclxuXHRcdC5hZGRCdXR0b24oYnRuID0+IHtidG4uc2V0SWNvbignbWFydGluaScpO1xyXG5cdFx0XHR2YXIgbXNnID0gXCJUaGUgdGhpcmQgdG9nZ2xlIG9uIGEgc3RhcnJlZCB0YWcgYWRkcyBhIGJ1dHRvbiBmb3IgaXQgdG8gdGhlIHN0YXR1cyBiYXIuICAtLS0gTk9UIElNUExFTUVOVEVEXCI7XHJcblx0XHRcdGJ0bi5vbkNsaWNrKCgpID0+IG5ldyBOb3RpY2UobXNnLDYwMDApKVxyXG5cdFx0XHRidG4uc2V0VG9vbHRpcChtc2cpXHJcblx0XHR9KVxyXG5cdFx0LmFkZEJ1dHRvbihidG4gPT4ge2J0bi5zZXRJY29uKCdtb3VzZS1wb2ludGVyLWNsaWNrJyk7XHJcblx0XHRcdHZhciBtc2cgPSBcIlRoZSBmb3VydGggdG9nZ2xlIG9uIGEgc3RhcnJlZCB0YWcgYWRkcyBpdCB0byB0aGUgY29udGV4dCBtZW51LiAgLS0tIE5PVCBJTVBMRU1FTlRFRFwiO1xyXG5cdFx0XHRidG4ub25DbGljaygoKSA9PiBuZXcgTm90aWNlKG1zZyw2MDAwKSlcclxuXHRcdFx0YnRuLnNldFRvb2x0aXAobXNnKVxyXG5cdFx0fSlcclxuXHRcdC5hZGRCdXR0b24oYnRuID0+IHtidG4uc2V0SWNvbigndXAtYXJyb3ctd2l0aC10YWlsJyk7XHJcblx0XHRcdHZhciBtc2cgPSBcIlRoZSB1cCBhcnJvdyBidXR0b24gbW92ZXMgdGhlIHN0YXJyZWQgdGFnIHVwIG9uIHRoZSBzdGFycmVkIHRhZyBsaXN0LiBUaGlzIGFmZmVjdHMgdGhlIG9yZGVyIGl0J3MgZGlzcGxheWVkIGluIHRoZSB0YWcgc2VsZWN0aW9uIGRpYWxvZy5cIjtcclxuXHRcdFx0YnRuLm9uQ2xpY2soKCkgPT4gbmV3IE5vdGljZShtc2csNjAwMCkpXHJcblx0XHRcdGJ0bi5zZXRUb29sdGlwKG1zZylcclxuXHRcdH0pXHJcblx0XHQuYWRkQnV0dG9uKGJ0biA9PiB7YnRuLnNldEljb24oJ2Rvd24tYXJyb3ctd2l0aC10YWlsJyk7XHJcblx0XHRcdHZhciBtc2cgPSBcIlRoZSBkb3duIGFycm93IGJ1dHRvbiBtb3ZlcyB0aGUgc3RhcnJlZCB0YWcgZG93biBvbiB0aGUgc3RhcnJlZCB0YWcgbGlzdC4gVGhpcyBhZmZlY3RzIHRoZSBvcmRlciBpdCdzIGRpc3BsYXllZCBpbiB0aGUgdGFnIHNlbGVjdGlvbiBkaWFsb2cuXCI7XHJcblx0XHRcdGJ0bi5vbkNsaWNrKCgpID0+IG5ldyBOb3RpY2UobXNnLDYwMDApKVxyXG5cdFx0XHRidG4uc2V0VG9vbHRpcChtc2cpXHJcblx0XHR9KVxyXG5cdFx0LmFkZEJ1dHRvbihidG4gPT4ge2J0bi5zZXRJY29uKCd0cmFzaCcpO1xyXG5cdFx0XHR2YXIgbXNnID0gXCJUaGUgdHJhc2ggY2FuIGJ1dHRvbiByZW1vdmVzIHRoZSBzdGFycmVkIHRhZyBmcm9tIHRoZSBzdGFycmVkIGxpc3QuXCI7XHJcblx0XHRcdGJ0bi5vbkNsaWNrKCgpID0+IG5ldyBOb3RpY2UobXNnLDYwMDApKVxyXG5cdFx0XHRidG4uc2V0VG9vbHRpcChtc2cpXHJcblx0XHR9KVxyXG5cdFx0Lm5hbWVFbC5zZXRUZXh0KFwiU3RhcnJlZCB0YWdzIGdldCBzcGVjaWFsIHRyZWF0bWVudC4gQ2xpY2sgb3IgaG92ZXIgb3ZlciB0aGVzZSBidXR0b25zIGZvciBtb3JlIGRldGFpbHMgXHVEODNEXHVEQzQ5XCIpXHJcblxyXG5cclxuXHRcdHByaW9yaXR5VGFncy5mb3JFYWNoKCh0YWcsIGkpID0+IHtcclxuXHRcdFx0Y29uc3QgcyA9IG5ldyBTZXR0aW5nKGRpdilcclxuXHRcdFx0XHRcdC5hZGRUb2dnbGUodG9nZ2xlID0+IHtcclxuXHRcdFx0XHRcdFx0dG9nZ2xlXHJcblx0XHRcdFx0XHRcdC5zZXRWYWx1ZSh0YWcuY3V0X2luX2xpbmUpXHJcblx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0XHR0YWcuY3V0X2luX2xpbmUgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0XHRuZXcgTm90aWNlKHRhZy5jdXRfaW5fbGluZSA/IGBBZGRlZCAke3RhZy50YWdfdmFsdWV9IHRvIHByaW9yaXR5IHNlY3Rpb24gb2Ygc2VsZWN0b3IgZGlhbG9nYCA6IGBSZW1vdmVkICR7dGFnLnRhZ192YWx1ZX0gZnJvbSBwcmlvcml0eSBzZWN0aW9uIG9mIHNlbGVjdG9yIGRpYWxvZ2ApXHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHR0b2dnbGUuc2V0VG9vbHRpcChcIlNob3cgZmlyc3QgaW4gdGFnIHNlbGVjdGlvbiBkaWFsb2dcIilcclxuXHRcdFx0XHRcdH0pXHJcblx0XHRcdFx0XHQuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB7XHJcblx0XHRcdFx0XHRcdHRvZ2dsZVxyXG5cdFx0XHRcdFx0XHQuc2V0VmFsdWUodGFnLmFkZF9jb21tYW5kKVxyXG5cdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0dGFnLmFkZF9jb21tYW5kID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0ZHluYW1pY1RvZ2dsZUNvbW1hbmQodGhpcy5hcHAsIHRoaXMucGx1Z2luLCB0YWcpO1xyXG5cdFx0XHRcdFx0XHRcdG5ldyBOb3RpY2UodGFnLmFkZF9jb21tYW5kID8gYEFkZGVkICR7dGFnLnRhZ192YWx1ZX0gY29tbWFuZGAgOiBgUmVtb3ZlZCAke3RhZy50YWdfdmFsdWV9IGNvbW1hbmRgKVxyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0dG9nZ2xlLnNldFRvb2x0aXAoXCJBZGQgY29tbWFuZCBmb3IgdGhpcyB0YWdcIilcclxuXHRcdFx0XHRcdH0pXHJcblx0XHRcdFx0XHQuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB7XHJcblx0XHRcdFx0XHRcdHRvZ2dsZVxyXG5cdFx0XHRcdFx0XHQuc2V0VmFsdWUodGFnLnN0YXR1c19iYXIpXHJcblx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0XHR0YWcuc3RhdHVzX2JhciA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHRcdG5ldyBOb3RpY2UodGFnLnN0YXR1c19iYXIgPyBgQWRkZWQgJHt0YWcudGFnX3ZhbHVlfSBidXR0b24gdG8gc3RhdHVzIGJhcmAgOiBgUmVtb3ZlZCAke3RhZy50YWdfdmFsdWV9IGJ1dHRvbiBmcm9tIHN0YXR1cyBiYXJgKVxyXG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnJlZHJhd0J1dHRvbnMoKVxyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0dG9nZ2xlLnNldFRvb2x0aXAoXCJBZGQgYnV0dG9uIHRvIHN0YXR1cyBiYXJcIilcclxuXHRcdFx0XHRcdH0pXHJcblx0XHRcdFx0XHQuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB7XHJcblx0XHRcdFx0XHRcdHRvZ2dsZVxyXG5cdFx0XHRcdFx0XHQuc2V0VmFsdWUodGFnLnJpZ2h0X2NsaWNrKVxyXG5cdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0dGFnLnJpZ2h0X2NsaWNrID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdFx0bmV3IE5vdGljZSh0YWcucmlnaHRfY2xpY2sgPyBgQWRkZWQgJHt0YWcudGFnX3ZhbHVlfSB0byByaWdodC1jbGljayBtZW51YCA6IGBSZW1vdmVkICR7dGFnLnRhZ192YWx1ZX0gZnJvbSByaWdodC1jbGljayBtZW51YClcclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdHRvZ2dsZS5zZXRUb29sdGlwKFwiQWRkIGNvbnRleHQgbWVudSBlbnRyeVwiKVxyXG5cdFx0XHRcdFx0fSlcclxuXHRcdFx0XHRcdC5hZGRCdXR0b24oYnV0dG9uID0+IHtcclxuXHRcdFx0XHRcdFx0YnV0dG9uLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IG9sZFRhZyA9IHByaW9yaXR5VGFnc1tpLTFdO1xyXG5cdFx0XHRcdFx0XHRcdHByaW9yaXR5VGFnc1tpLTFdID0gdGFnO1xyXG5cdFx0XHRcdFx0XHRcdHByaW9yaXR5VGFnc1tpXSA9IG9sZFRhZztcclxuXHRcdFx0XHRcdFx0XHR0aGlzLmRyYXdQcmlvcml0eVRhZ3MoZGl2KTtcclxuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5yZWRyYXdCdXR0b25zKClcclxuXHRcdFx0XHRcdFx0fSlcclxuXHRcdFx0XHRcdFx0YnV0dG9uLnNldEljb24oXCJ1cC1hcnJvdy13aXRoLXRhaWxcIik7XHJcblx0XHRcdFx0XHRcdGJ1dHRvbi5zZXRUb29sdGlwKFwiTW92ZSBTdGFycmVkIFRhZyB1cFwiKVxyXG5cdFx0XHRcdFx0XHRpZiAoaSA9PT0gMCl7XHJcblx0XHRcdFx0XHRcdFx0YnV0dG9uLnNldERpc2FibGVkKHRydWUpO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9KVxyXG5cdFx0XHRcdFx0LmFkZEJ1dHRvbihidXR0b24gPT4ge1xyXG5cdFx0XHRcdFx0XHRidXR0b24ub25DbGljayhhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0Y29uc3Qgb2xkVGFnID0gcHJpb3JpdHlUYWdzW2krMV07XHJcblx0XHRcdFx0XHRcdFx0cHJpb3JpdHlUYWdzW2krMV0gPSB0YWc7XHJcblx0XHRcdFx0XHRcdFx0cHJpb3JpdHlUYWdzW2ldID0gb2xkVGFnO1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMuZHJhd1ByaW9yaXR5VGFncyhkaXYpO1xyXG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnJlZHJhd0J1dHRvbnMoKVxyXG5cdFx0XHRcdFx0XHR9KVxyXG5cdFx0XHRcdFx0XHRidXR0b24uc2V0SWNvbihcImRvd24tYXJyb3ctd2l0aC10YWlsXCIpO1xyXG5cdFx0XHRcdFx0XHRidXR0b24uc2V0VG9vbHRpcChcIk1vdmUgU3RhcnJlZCBUYWcgZG93blwiKVxyXG5cdFx0XHRcdFx0XHRpZiAoaSA9PT0gcHJpb3JpdHlUYWdzLmxlbmd0aCAtIDEpe1xyXG5cdFx0XHRcdFx0XHRcdGJ1dHRvbi5zZXREaXNhYmxlZCh0cnVlKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fSlcclxuXHRcdFx0XHRcdC5hZGRCdXR0b24oYnRuID0+IHtcclxuXHRcdFx0XHRcdFx0YnRuLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdHByaW9yaXR5VGFncy5yZW1vdmUodGFnKVxyXG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMuZHJhd1ByaW9yaXR5VGFncyhkaXYpXHJcblx0XHRcdFx0XHRcdH0pXHJcblx0XHRcdFx0XHRcdGJ0bi5zZXRJY29uKFwidHJhc2hcIilcclxuXHRcdFx0XHRcdFx0YnRuLnNldFRvb2x0aXAoXCJSZW1vdmUgdGhpcyBUYWdcIilcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdHMubmFtZUVsLmlubmVySFRNTCA9IHRhZy50YWdfdmFsdWVcclxuXHRcdH0pXHJcblx0fVxyXG59XHJcbiIsICJpbXBvcnR7IE5vdGljZSwgQXBwLCBURmlsZSwgTWVudSB9IGZyb20gJ29ic2lkaWFuJ1xyXG5pbXBvcnQgUXVpY2tUYWdQbHVnaW4sIHsgU3RhcnJlZFRhZyB9IGZyb20gXCIuL21haW5cIlxyXG5pbXBvcnQgeyBDb25maXJtTW9kYWwsIFF1aWNrVGFnU2VsZWN0b3IgfSBmcm9tICcuL21vZGFsJ1xyXG5pbXBvcnQgeyBnZXRUYWdMaXN0LCBnZXRUYWdzT25GaWxlcyB9IGZyb20gJy4vdGFnX2dhdGhlcmVycydcclxuaW1wb3J0IHsgZmlsdGVyVGFnLCBnZXRGaWx0ZXJlZFdpdGhUYWcsIGdldEZpbHRlcmVkV2l0aG91dFRhZyB9IGZyb20gJy4vZmlsZV9maWx0ZXJzJ1xyXG5leHBvcnQgeyBzZWxlY3RUYWcsIGFkZFRhZ3NXaXRoTW9kYWwsIGFkZFRhZ1dpdGhNb2RhbCwgcmVtb3ZlVGFnV2l0aE1vZGFsLCByZW1vdmVUYWdzV2l0aE1vZGFsLFxyXG5cdHRvZ2dsZVRhZ09uQWN0aXZlLCBkeW5hbWljVG9nZ2xlQ29tbWFuZCwgZHluYW1pY0FkZE1lbnVJdGVtcyB9XHJcblxyXG5jb25zdCB0YWdfa2V5ID0gJ3RhZ3MnXHJcbmNvbnN0IHRhZ19jbGVhbnVwID0gWyd0YWcnLCAnVGFnJywgJ1RhZ3MnXVxyXG5jb25zdCBXT0FIX0xPVFNfT0ZfRklMRVMgPSAxMDBcclxuXHJcblxyXG4vKiogR2V0cyB0aGUgYWN0aXZlIGZpbGVcclxuICogXHJcbiAqIEByZXR1cm5zIFRmaWxlIGFycmF5XHJcbiAqL1xyXG5mdW5jdGlvbiBfZ2V0QWN0aXZlRmlsZSgpIHtcclxuXHR2YXIgdGhpc0ZpbGUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpXHJcblx0aWYodGhpc0ZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xyXG5cdFx0cmV0dXJuIFt0aGlzRmlsZV1cclxuXHR9IGVsc2Uge1xyXG5cdFx0bmV3IE5vdGljZShcIk5vIGZpbGUgb3BlbiFcIilcclxuXHRcdHJldHVybiBbXSBhcyBURmlsZVtdXHJcblx0fVxyXG59XHJcblxyXG5cclxuLyoqIEFkZCBhIHRhZyB0byBhIG5vdGVcclxuICogXHJcbiAqIEBwYXJhbSB0aGlzRmlsZSB0aGUgZmlsZSB0byBlZGl0XHJcbiAqIEBwYXJhbSB0YWcgdGhlIHRhZyB0byBhZGRcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIF9hZGRUYWcodGhpc0ZpbGU6IFRGaWxlLCB0YWc6IHN0cmluZyl7XHJcblx0YXdhaXQgX2NsZWFuRmlsZSh0aGlzRmlsZSlcclxuXHRhd2FpdCB0aGlzLmFwcC5maWxlTWFuYWdlci5wcm9jZXNzRnJvbnRNYXR0ZXIodGhpc0ZpbGUsIChmcm9udG1hdHRlcjogb2JqZWN0KSA9PiB7XHJcblx0XHRmcm9udG1hdHRlciA9IF9jb2xsZWN0RXhpc3RpbmdUYWdzKGZyb250bWF0dGVyKTtcclxuXHRcdGZyb250bWF0dGVyW3RhZ19rZXldLnB1c2godGFnKVxyXG5cdH0pXHJcbn1cclxuXHJcblxyXG4vKiogUmVtb3ZlIGEgdGFnIGZyb20gYSBub3RlXHJcbiAqIFxyXG4gKiBAcGFyYW0gdGFnIHRoZSB0YWcgdG8gcmVtb3ZlXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBfcmVtb3ZlVGFnKHRoaXNGaWxlOiBURmlsZSwgdGFnOnN0cmluZyl7XHJcblx0YXdhaXQgX2NsZWFuRmlsZSh0aGlzRmlsZSlcclxuXHR2YXIgcHJvY2Vzc29yID0gKGZyb250bWF0dGVyOiBvYmplY3QpID0+IHtcclxuXHRcdGZyb250bWF0dGVyID0gX2NvbGxlY3RFeGlzdGluZ1RhZ3MoZnJvbnRtYXR0ZXIpXHJcblx0XHR2YXIgdGFncyA9IGZyb250bWF0dGVyW3RhZ19rZXldXHJcblx0XHR2YXIgaW5keCA9IHRhZ3MuaW5kZXhPZih0YWcsIDApXHJcblx0XHRpZiAoaW5keCA+IC0xKXtcclxuXHRcdFx0dGFncy5zcGxpY2UoaW5keCwgMSlcclxuXHRcdH1cclxuXHR9XHJcblx0aWYgKHRhZyA9PSBcIlJFTU9WRSBBTExcIil7XHJcblx0XHRwcm9jZXNzb3IgPSAoZnJvbnRtYXR0ZXI6IG9iamVjdCkgPT4ge1xyXG5cdFx0XHRmcm9udG1hdHRlclt0YWdfa2V5XSA9IFtdXHJcblx0XHR9XHJcblx0fVxyXG5cdGF3YWl0IHRoaXMuYXBwLmZpbGVNYW5hZ2VyLnByb2Nlc3NGcm9udE1hdHRlcih0aGlzRmlsZSwgcHJvY2Vzc29yKVxyXG59XHJcblxyXG4vKiogQWRkIG9yIHJlbW92ZSB0aGUgZ2l2ZW4gdGFnIG9uIHRoZSBnaXZlbiBmaWxlc1xyXG4gKiBcclxuICogQHBhcmFtIGZpbGVzIFxyXG4gKiBAcGFyYW0gdGFnIFxyXG4gKiBAcmV0dXJucyBudW1iZXIgYWRkZWQsIG51bWJlciByZW1vdmVkIFxyXG4gKi9cclxuZnVuY3Rpb24gX3RvZ2dsZVRhZ3MoZmlsZXM6IFRGaWxlW10sIHRhZzogc3RyaW5nKTogbnVtYmVyW10ge1xyXG5cdHZhciB0YWcgPSB0YWcucmVwbGFjZSgnIycsICcnKVxyXG5cdHZhciB0YWdfYWRkZWQgPSAwXHJcblx0dmFyIHRhZ19yZW1vdmVkID0gMFxyXG5cclxuXHRmb3IodmFyIGk9MDsgaTxmaWxlcy5sZW5ndGg7IGkrKyl7XHJcblx0XHR2YXIgZXhpc3RzID0gZmlsdGVyVGFnKGZpbGVzW2ldLCBgIyR7dGFnfWApXHJcblx0XHRpZighZXhpc3RzKXtcclxuXHRcdFx0X2FkZFRhZyhmaWxlc1tpXSwgdGFnKVxyXG5cdFx0XHR0YWdfYWRkZWQrK1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0X3JlbW92ZVRhZyhmaWxlc1tpXSwgdGFnKVxyXG5cdFx0XHR0YWdfcmVtb3ZlZCsrXHJcblx0XHR9XHJcblx0fVxyXG5cdHJldHVybiBbdGFnX2FkZGVkLCB0YWdfcmVtb3ZlZF1cclxufVxyXG5cclxuXHJcbi8qKiBMb29wIG92ZXIgZmlsZXMgYW5kIGFkZCB0YWdzXHJcbiAqIFxyXG4gKiBcclxuICogQHBhcmFtIGZpbGVzIGFycmF5IG9mIGZpbGVzIHRvIGVkaXRcclxuICogQHBhcmFtIHRhZyB0YWcgdG8gYWRkXHJcbiAqIEBwYXJhbSBwbHVnaW4gYSByZWZlcmVuY2UgdG8gdGhlIHBsdWdpbiAodXNlZCB0byB1cGRhdGUgc3RhdHVzIGJhcilcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIF9hZGRUYWdUb01hbnkoZmlsZXM6VEZpbGVbXSwgdGFnOnN0cmluZywgcGx1Z2luOiBRdWlja1RhZ1BsdWdpbil7XHJcblx0Y29uc29sZS5sb2coXCJBRERJTkcgVEFHU1wiKVxyXG5cdGF3YWl0IF9hcHBseV9idWxrX2NoYW5nZXMoZmlsZXMsIHRhZywgcGx1Z2luLCBfYWRkVGFnKVxyXG59XHJcblxyXG5cclxuLyoqIExvb3Agb3ZlciBmaWxlcyBhbmQgcmVtb3ZlIHRhZ3NcclxuICogXHJcbiAqIEBwYXJhbSBmaWxlcyBhcnJheSBvZiBmaWxlcyB0byBlZGl0XHJcbiAqIEBwYXJhbSB0YWcgdGFnIHRvIHJlbW92ZVxyXG4gKiBAcGFyYW0gcGx1Z2luIGEgcmVmZXJlbmNlIHRvIHRoZSBwbHVnaW4gKHVzZWQgdG8gdXBkYXRlIHN0YXR1cyBiYXIpXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBfcmVtb3ZlVGFnRnJvbU1hbnkoZmlsZXM6VEZpbGVbXSwgdGFnOnN0cmluZywgcGx1Z2luOiBRdWlja1RhZ1BsdWdpbil7XHJcblx0Y29uc29sZS5sb2coXCJSRU1PVklORyBUQUdTXCIpXHJcblx0YXdhaXQgX2FwcGx5X2J1bGtfY2hhbmdlcyhmaWxlcywgdGFnLCBwbHVnaW4sIF9yZW1vdmVUYWcpXHJcbn1cclxuXHJcblxyXG4vKiogQ29uc29saWRhdGVzIHRoZSBidWxrIHByb2Nlc3NpbmcgZm9yIGFkZC9yZW1vdmUgZnVuY3Rpb25zLlxyXG4gKiBBZGQgYSBwcm9ncmVzcyBiYXIgaW4gdGhlIHN0YXR1cyBiYXIgaWYgdGhlcmUgYXJlIGxvdHMgb2YgZmlsZXNcclxuICogXHJcbiAqIEBwYXJhbSBmaWxlcyBcclxuICogQHBhcmFtIHRhZyBcclxuICogQHBhcmFtIHBsdWdpbiBcclxuICogQHBhcmFtIGZ1bmMgXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBfYXBwbHlfYnVsa19jaGFuZ2VzKGZpbGVzOlRGaWxlW10sIHRhZzpzdHJpbmcsIHBsdWdpbjpRdWlja1RhZ1BsdWdpbiwgZnVuYzpGdW5jdGlvbil7XHJcblx0dmFyIGxvZ2dlciA9IHBsdWdpbi5hZGRTdGF0dXNCYXJJdGVtKCk7XHJcblx0bG9nZ2VyLmNyZWF0ZUVsKFwic3BhblwiKVxyXG5cdHZhciB1c2VTdGF0dXNCYXIgPSBmYWxzZVxyXG5cclxuXHRpZiAoZmlsZXMubGVuZ3RoID4gV09BSF9MT1RTX09GX0ZJTEVTKXtcclxuXHRcdG5ldyBOb3RpY2UoXCJQcm9jZXNzaW5nIFwiICsgZmlsZXMubGVuZ3RoICsgXCIgZmlsZXMuLi4gVGhpcyBtaWdodCB0YWtlIGEgd2hpbGUuIFNlZSBzdGF0dXMgYmFyIGZvciBwcm9ncmVzcy5cIilcclxuXHRcdHVzZVN0YXR1c0JhciA9IHRydWVcclxuXHR9XHJcblx0Zm9yICh2YXIgaT0wOyBpPGZpbGVzLmxlbmd0aDsgaSsrKXtcclxuXHRcdGlmKHVzZVN0YXR1c0Jhcil7XHJcblx0XHRcdGxvZ2dlci5zZXRUZXh0KGBQcm9jZXNzaW5nICR7dGFnfTogJHtpICsgMX0vJHtmaWxlcy5sZW5ndGh9YClcclxuXHRcdH1cclxuXHRcdGF3YWl0IGZ1bmMoZmlsZXNbaV0sIHRhZylcclxuXHR9XHJcblxyXG5cdGxvZ2dlci5yZW1vdmUoKVxyXG59XHJcblxyXG5cclxuLyoqIEZpeCBwcm9ibGVtcyB3aXRoIHByb2Nlc3NGcm9udE1hdHRlci5cclxuICogcHJvY2Vzc0Zyb250TWF0dGVyIGRvZXMgbm90IHdvcmsgaWYgdGhlcmUgYXJlIG5ld2xpbmVzIGJlZm9yZSB0aGUgbWV0YWRhdGFcclxuICogb3Igc3BhY2VzIGFmdGVyIHRoZSBzZWNvbmQgc2V0IG9mIGRhc2hlcy5cclxuICogXHJcbiAqIEBwYXJhbSBmIFxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gX2NsZWFuRmlsZShmOlRGaWxlKXtcclxuXHRsZXQgdGV4dCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQoZilcclxuXHR2YXIgbW9kaWZpZWQgPSBmYWxzZVxyXG5cclxuXHQvLyBmaXJzdCBjaGVjayBuZXdsaW5lc1xyXG5cdGlmKHRleHRbMF0gPT0gJ1xcbicpe1xyXG5cdFx0d2hpbGUodGV4dFswXSA9PSAnXFxuJyl7XHJcblx0XHRcdHRleHQgPSB0ZXh0LnNsaWNlKDEpXHJcblx0XHR9XHJcblx0XHRtb2RpZmllZCA9IHRydWVcclxuXHR9XHJcblxyXG5cdC8vIHRoZW4gY2hlY2sgdG8gbWFrZSBzdXJlIHdlIGhhdmUgb3VyIHlhbWwgZ3VpZGVyYWlsc1xyXG5cdGlmKHRleHQuaW5kZXhPZihcIi0tLVxcblwiKSA9PSAwKXtcclxuXHRcdHZhciBtYXRjaGVzID0gdGV4dC5tYXRjaCgvLS0tXFxzKlxcbj8vZylcclxuXHRcdGlmKG1hdGNoZXNbMV0gIT0gXCItLS1cXG5cIiAmJiBtYXRjaGVzWzFdICE9IFwiLS0tXCIpeyAgLy8gaWYgb3VyIHNlY29uZCBtYXRjaCBpc24ndCBjbGVhbiwgZml4IGl0IVxyXG5cdFx0XHR0ZXh0ID0gdGV4dC5yZXBsYWNlKG1hdGNoZXNbMV0sIFwiLS0tXFxuXCIpXHJcblx0XHRcdG1vZGlmaWVkID0gdHJ1ZVxyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0Ly8gaWYgYW55dGhpbmcgd2FzIGNoYW5nZWQsIHdyaXRlIGl0IGJhY2sgdG8gdGhlIGZpbGVcclxuXHRpZihtb2RpZmllZCl7XHJcblx0XHRjb25zb2xlLmxvZyhgZml4aW5nIHVwIGJyb2tlbiBwYXJ0cyBvZiAke2YuYmFzZW5hbWV9J3MgeWFtbC4uLmApXHJcblx0XHRhd2FpdCB0aGlzLmFwcC52YXVsdC5tb2RpZnkoZiwgdGV4dClcclxuXHR9XHJcbn1cclxuXHJcblxyXG4vKiogQ29sbGVjdCBhbGwgcmVjb2duaXplZCB0YWcgbGlzdCB2YXJpYXRpb25zIGludG8gb25lIGtleVxyXG4gKiBcclxuICogQHBhcmFtIHlhbWwgLSBhIHNpbmdsZSB5YW1sIGRpY3QgXHJcbiAqIEByZXR1cm5zIC0gYSBzaW5nbGUgbW9kaWZpZWQgeWFtbCBkaWN0XHJcbiAqL1xyXG5mdW5jdGlvbiBfY29sbGVjdEV4aXN0aW5nVGFncyh5bWw6YW55KXtcclxuXHQvLyBtYWtlIHRoZSBkZXNpcmVkIGtleSwgaWYgaXQgZG9lcyBub3QgZXhpc3RcclxuXHRpZiAoIXltbC5oYXNPd25Qcm9wZXJ0eSh0YWdfa2V5KSl7XHJcblx0XHR5bWxbdGFnX2tleV0gPSBbXVxyXG5cdH0gZWxzZSB7XHJcblx0XHQvLyBjYXRjaCBleGlzdGluZyBzdHJpbmcgZm9ybWF0dGluZyB0aGF0IHdvcmtzIGluIG9ic2lkaWFuLCBidXQgbm90IGphdmFzY3JpcHRcclxuXHRcdHltbFt0YWdfa2V5XSA9IF9jb25mb3JtVG9BcnJheSh5bWxbdGFnX2tleV0pXHJcblx0fVxyXG5cclxuXHQvLyBnZXQgYSBsaXN0IG9mIGFueSBrZXlzIHRoZSB5YW1sIGluY2x1ZGVzIHRoYXQgd2UgZG9uJ3Qgd2FudFxyXG5cdHZhciBhbHRlcm5hdGVfa2V5cyA9IHRhZ19jbGVhbnVwLmZpbHRlcih2ID0+IE9iamVjdC5rZXlzKHltbCkuaW5jbHVkZXModikpXHJcblx0XHJcblx0Zm9yKHZhciBpPTA7aTxhbHRlcm5hdGVfa2V5cy5sZW5ndGg7aSsrKXtcclxuXHRcdHZhciBvdGhlclRhZ3MgPSBfY29uZm9ybVRvQXJyYXkoeW1sW2FsdGVybmF0ZV9rZXlzW2ldXSlcclxuXHRcdG90aGVyVGFncy5mb3JFYWNoKCh0YWc6IHN0cmluZykgPT4ge1xyXG5cdFx0XHQvLyBkdW1wIG5vbi1kdXBsaWNhdGUgdGFncyBmcm9tIG90aGVyIGtleXMgaW50byB0aGUgZGVzaXJlZCBrZXlcclxuXHRcdFx0IXltbFt0YWdfa2V5XS5pbmNsdWRlcyh0YWcpID8geW1sW3RhZ19rZXldLnB1c2godGFnKSA6IGNvbnNvbGUubG9nKHRhZyArIFwiIGFscmVhZHkgZXhpc3RzXCIpIFxyXG5cdFx0fSk7XHJcblxyXG5cdFx0ZGVsZXRlIHltbFthbHRlcm5hdGVfa2V5c1tpXV0gIC8vIHJlbW92ZSB0aGUgdW5kZXNpcmVkIGtleXNcclxuXHR9XHJcblxyXG5cdHJldHVybiB5bWxcclxuICB9XHJcblxyXG5cclxuLyoqIEZpeCBjb21tYSBvciBzcGFjZSBzZXBlcmF0ZWQgdGFnc1xyXG4gKiBPYnNpZGlhbiBjYW4gc3RvcmUgdGFncyBpbiB0aGUgeWFtbCBoZWFkZXIgYXMgYSBjb21tYS1zZXBhcmF0ZWQgb3IgXHJcbiAqIHNwYWNlLXNlcGFyYXRlZCBzdHJpbmcuIFRoaXMgZnVuY3Rpb24gY29udmVydHMgdGhpcyBzdHJpbmcgZm9ybWF0IGludG8gYW4gYXJyYXkuXHJcbiAqIFxyXG4gKiBAcGFyYW0gaW5wdXQgLSBhIHN0cmluZyBvciBhcnJheSB0byBiZSBjb25mb3JtZWRcclxuICogQHJldHVybnMgLSB0aGUgY29uZm9ybWVkIGFycmF5XHJcbiAqL1xyXG5mdW5jdGlvbiBfY29uZm9ybVRvQXJyYXkoaW5wdXQ6c3RyaW5nIHwgQXJyYXk8c3RyaW5nPil7XHJcblx0dmFyIG91dHB1dCA9IHR5cGVvZihpbnB1dCkgPT09ICdzdHJpbmcnID8gaW5wdXQuc3BsaXQoJywnKS5tYXAoZSA9PiBlLnRyaW0oKSkgOiBpbnB1dFxyXG4gICAgaWYgKG91dHB1dC5sZW5ndGggPT0gMSl7XHJcblx0XHQvLyBpZiB3ZSBoYXZlIG9uZSBzdHJpbmcsIHNwbGl0IGl0IGJ5IHNwYWNlcyB0byBjb25maXJtIHdlIGRvbid0IGhhdmUgbXVsdGlwbGUgdGFnc1xyXG5cdFx0b3V0cHV0ID0gb3V0cHV0WzBdLnNwbGl0KCcgJykubWFwKGUgPT4gZS50cmltKCkpXHJcblx0fVxyXG5cdHJldHVybiBvdXRwdXQgPyBvdXRwdXQgOiBbXVxyXG59XHJcblxyXG5cclxuLyoqIFNwYXduIGEgc2VsZWN0aW9uIGRpYWxvZyBhbmQgcmV0dXJuIGEgdGFnIG9uY2Ugc2VsZWN0ZWRcclxuICogXHJcbiAqIEBwYXJhbSBwbHVnaW4gdGhlIG1haW4gUXVpY2stVGFnZ2VyIHBsdWdpblxyXG4gKiBAcGFyYW0gZ2F0aGVyZXIgYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIGxpc3Qgb2YgdGFncyB0byBkaXNwbGF5IGluIHRoZSBRdWlja1RhZ1NlbGVjdG9yXHJcbiAqIEBwYXJhbSBub3RlcyBub3RlcyB0aGF0IHRoaXMgYWN0aW9uIHdpbGwgYWZmZWN0XHJcbiAqIEByZXR1cm5zIHByb21pc2UgZm9yIGEgdGFnIChzdHJpbmcpIHNlbGVjdGVkIGZyb20gdGhlIG1vZGFsXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBzZWxlY3RUYWcocGx1Z2luOiBRdWlja1RhZ1BsdWdpbiwgZ2F0aGVyZXI6IEZ1bmN0aW9uLCBub3Rlcz86IFRGaWxlW10pOiBQcm9taXNlPHN0cmluZz57XHJcblx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XHJcblx0XHRjb25zdCBtb2RhbCA9IG5ldyBRdWlja1RhZ1NlbGVjdG9yKHBsdWdpbiwgZ2F0aGVyZXIsIG5vdGVzID8gbm90ZXMgOiBbXSk7XHJcblxyXG5cdFx0Ly8gb3ZlcndyaXRlIG9uQ2hvb3NlSXRlbSBtZXRob2Qgc28gd2UgY2FuIGluc2VydCB0aGUgcmVzb2x2ZVxyXG5cdFx0bW9kYWwub25DaG9vc2VJdGVtID0gKHRhZzogc3RyaW5nKSA9PiB7XHJcblx0XHRcdHJlc29sdmUodGFnKVxyXG5cdFx0fVxyXG5cdFx0bW9kYWwub3BlbigpXHJcblx0fSlcclxufVxyXG5cclxuXHJcbi8qKiBTcGF3biBub3RpZmljYXRpb24gZm9yIHVzZXIgdGhhdCB0YWdzIHdlcmUgYWRkZWQvcmVtb3ZlZCBzdWNjZXNzZnVsbHlcclxuICogXHJcbiAqIEBwYXJhbSBtb2RlIFxyXG4gKiBAcGFyYW0gdGFnIFxyXG4gKiBAcGFyYW0gYXBwbGljYWJsZUZpbGVzIFxyXG4gKi9cclxuZnVuY3Rpb24gY29uZmlybWF0aW9uTm90aWZpY2F0aW9uKG1vZGU6c3RyaW5nLCB0YWc6c3RyaW5nLCBhcHBsaWNhYmxlRmlsZXM6IFRGaWxlW10pe1xyXG5cdHZhciBub3RlcyA9IGFwcGxpY2FibGVGaWxlcy5sZW5ndGggPiAxID8gYXBwbGljYWJsZUZpbGVzLmxlbmd0aCArIFwiIG5vdGVzXCIgOiBhcHBsaWNhYmxlRmlsZXNbMF0uYmFzZW5hbWVcclxuXHR2YXIgdG9mcm9tID0gbW9kZSA9PSAnYWRkJyA/IFwiIGFkZGVkIHRvIFwiIDogXCIgcmVtb3ZlZCBmcm9tIFwiXHJcblx0aWYgKHRhZyA9PSBcIlJFTU9WRSBBTExcIil7XHJcblx0XHRuZXcgTm90aWNlKFwiQWxsIHRhZ3MgcmVtb3ZlZCBmcm9tIFwiICsgbm90ZXMpXHJcblx0fSBlbHNlIHtcclxuXHRcdG5ldyBOb3RpY2UodGFnICsgdG9mcm9tICsgbm90ZXMpXHJcblx0fVxyXG59XHJcblxyXG5cclxuLyoqIFR1cm4gT2JzaWRpYW4gY29tbWFuZCBvbiBvciBvZmYgZm9yIGEgc3RhcnJlZCB0YWdcclxuICogXHJcbiAqIEBwYXJhbSBhcHAgXHJcbiAqIEBwYXJhbSBwbHVnaW4gXHJcbiAqIEBwYXJhbSBTdGFycmVkVGFnIFxyXG4gKiBAcmV0dXJucyBcclxuICovXHJcbmZ1bmN0aW9uIGR5bmFtaWNUb2dnbGVDb21tYW5kKGFwcDogQXBwLCBwbHVnaW46IFF1aWNrVGFnUGx1Z2luLCBTdGFycmVkVGFnOiBTdGFycmVkVGFnKXtcclxuXHR2YXIgdGFnID0gU3RhcnJlZFRhZy50YWdfdmFsdWUucmVwbGFjZSgnIycsICcnKVxyXG5cdHZhciBjb21tYW5kSWQgPSBgcXVpY2stYWRkLXRhZzoke3RhZ31gXHJcblx0dmFyIGZ1bGxJZCA9IGBvYnNpZGlhbi1xdWljay10YWdnZXI6JHtjb21tYW5kSWR9YFxyXG5cdHZhciBzdGF0ZSA9IGZhbHNlXHJcblxyXG5cdGlmKGFwcC5jb21tYW5kcy5maW5kQ29tbWFuZChmdWxsSWQpKSB7XHJcblx0XHRkZWxldGUgYXBwLmNvbW1hbmRzLmNvbW1hbmRzW2Z1bGxJZF07XHJcblx0XHRkZWxldGUgYXBwLmNvbW1hbmRzLmVkaXRvckNvbW1hbmRzW2Z1bGxJZF07XHJcblx0fSBlbHNlIHtcclxuXHRcdHBsdWdpbi5hZGRDb21tYW5kKHtcclxuXHRcdFx0aWQ6IGNvbW1hbmRJZCxcclxuXHRcdFx0bmFtZTogYFRvZ2dsZSAjJHt0YWd9YCxcclxuXHRcdFx0Y2FsbGJhY2s6ICgpID0+IHtcclxuXHRcdFx0XHR0b2dnbGVUYWdPbkFjdGl2ZSh0YWcpXHJcblx0XHRcdH1cclxuXHRcdH0pXHJcblx0XHRzdGF0ZSA9IHRydWVcclxuXHR9XHJcblx0cmV0dXJuIHN0YXRlXHJcbn1cclxuXHJcbi8qKiBBZGQgbWVudSBpdGVtcyBmb3IgY29uZmlndXJlZCBzdGFycmVkIHRhZ3NcclxuICogXHJcbiAqIEBwYXJhbSBtZW51IFxyXG4gKiBAcGFyYW0gZmlsZXMgXHJcbiAqIEBwYXJhbSBwbHVnaW4gXHJcbiAqL1xyXG5mdW5jdGlvbiBkeW5hbWljQWRkTWVudUl0ZW1zKG1lbnU6IE1lbnUsIGZpbGVzOiBURmlsZVtdLCBwbHVnaW46IFF1aWNrVGFnUGx1Z2luKXtcclxuXHR2YXIgc3RhcnJlZFRhZ3MgPSBwbHVnaW4uc2V0dGluZ3MucHJpb3JpdHlUYWdzXHJcblx0c3RhcnJlZFRhZ3MuZm9yRWFjaCgodCkgPT4ge1xyXG5cdFx0aWYodC5yaWdodF9jbGljayl7XHJcblx0XHRcdG1lbnUuYWRkSXRlbSgoaXRlbSkgPT57XHJcblx0XHRcdFx0aXRlbVxyXG5cdFx0XHRcdCAgLnNldFRpdGxlKGBUYWcgd2l0aCAke3QudGFnX3ZhbHVlfWApXHJcblx0XHRcdFx0ICAuc2V0SWNvbihcInRhZ1wiKVxyXG5cdFx0XHRcdCAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0YWRkVGFnc0RpcmVjdGx5KHBsdWdpbiwgZmlsZXMsIHQudGFnX3ZhbHVlKVxyXG5cdFx0XHRcdCAgfSlcclxuXHRcdFx0fSlcclxuXHRcdH1cclxuXHR9KVxyXG59XHJcblxyXG5cclxuLyoqIFNwYXduIGNvbmZpcm1hdGlvbiBkaWFsb2dzIHdhcmluZyB1c2VycyBhYm91dCByZW1vdmluZyBhbGwgYW5kIGJ1bGsgZWRpdHNcclxuICogXHJcbiAqIEBwYXJhbSBtb2RlIFxyXG4gKiBAcGFyYW0gdGFnIFxyXG4gKiBAcGFyYW0gcXVhbnRpdHkgXHJcbiAqIEByZXR1cm5zIFxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gYWRkRGlhbG9ncyhtb2RlOiBzdHJpbmcsIHRhZzogc3RyaW5nLCBxdWFudGl0eT86IG51bWJlcil7XHJcblx0dmFyIHZlcmIgPSBtb2RlXHJcblx0dmFyIHRvZnJvbSA9IG1vZGUgPT0gJ2FkZCcgPyBcIiB0byBcIiA6IFwiIGZyb20gXCJcclxuXHR2YXIgY29uZmlybSA9IHRydWVcclxuXHJcblx0aWYgKHRhZyA9PSBcIlJFTU9WRSBBTExcIil7XHJcblx0XHR2YXIgbXNnID0gXCJUaGlzIHdpbGwgZGVsZXRlIGFsbCB0YWdzIG9uIHRoZSBjdXJyZW50IG5vdGUocyksIGFyZSB5b3Ugc3VyZT9cIlxyXG5cdFx0YXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHsgIC8vIGFkZCBhIHByb21pc2UgdG8gd2FpdCBmb3IgY29uZmlybWF0aW9uXHJcblx0XHRcdG5ldyBDb25maXJtTW9kYWwoYXBwLCAocmVzdWx0KSA9PiAocmVzb2x2ZShjb25maXJtID0gcmVzdWx0KSksIG1zZykub3BlbigpXHJcblx0XHR9KVxyXG5cdFx0dmVyYiA9IFwiXCJcclxuXHR9XHJcblx0aWYgKCFjb25maXJtKSB7cmV0dXJuIGNvbmZpcm19XHJcblx0aWYgKHF1YW50aXR5ICYmIHF1YW50aXR5ID4gMSl7XHJcblx0XHR2YXIgbXNnID0gXCJZb3UgYXJlIGFib3V0IHRvIFwiICsgXHJcblx0XHRcdFx0XHR2ZXJiICsgXCIgXCIgK1xyXG5cdFx0XHRcdFx0dGFnICtcclxuXHRcdFx0XHRcdHRvZnJvbSArXHJcblx0XHRcdFx0XHRxdWFudGl0eSArIFwiIG5vdGVzLCBhcmUgeW91IHN1cmU/XCJcclxuXHRcdGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7ICAvLyBhZGQgYSBwcm9taXNlIHRvIHdhaXQgZm9yIGNvbmZpcm1hdGlvblxyXG5cdFx0XHRuZXcgQ29uZmlybU1vZGFsKGFwcCwgKHJlc3VsdCkgPT4gKHJlc29sdmUoY29uZmlybSA9IHJlc3VsdCkpLCBtc2cpLm9wZW4oKVxyXG5cdFx0fSlcclxuXHR9XHJcblx0cmV0dXJuIGNvbmZpcm1cclxufVxyXG5cclxuXHJcbi8vLy8gLS0tLS0tLS0tLS0tLS0tIERJUkVDVCBDT01NQU5EIENBTExTIC0tLS0tLS0tLS0tLS0tLS0tIC8vLy8vXHJcblxyXG4vKiogQ29udmVuaWVuY2UgZnVuY3Rpb24gdG8gY2FsbCBtb2RhbCwgd2FybmluZ3MsIGFkZCB0YWdzLCBhbmQgdGhlbiBjb25maXJtYXRpb25cclxuICogXHJcbiAqIEBwYXJhbSBwbHVnaW4gXHJcbiAqIEBwYXJhbSBmaWxlcyBcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGFkZFRhZ3NXaXRoTW9kYWwocGx1Z2luOiBRdWlja1RhZ1BsdWdpbiwgZmlsZXM6IFRGaWxlW10pe1xyXG5cdHZhciB0YWcgPSBhd2FpdCBzZWxlY3RUYWcocGx1Z2luLCBnZXRUYWdMaXN0LCBmaWxlcylcclxuXHRhZGRUYWdzRGlyZWN0bHkocGx1Z2luLCBmaWxlcywgdGFnKVxyXG59XHJcblxyXG5cclxuLyoqIENvbnZlbmllbmNlIGZ1bmN0aW9uIHRvIGdldCBhY3RpdmUsIHRoZW4gY2FsbCB0YWcgc2VsZWN0aW9uIGRpYWxvZ1xyXG4gKiBcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGFkZFRhZ1dpdGhNb2RhbChwbHVnaW46IFF1aWNrVGFnUGx1Z2luKXtcclxuXHR2YXIgY3VycmVudEZpbGUgPSBfZ2V0QWN0aXZlRmlsZSgpXHJcblx0YWRkVGFnc1dpdGhNb2RhbChwbHVnaW4sIGN1cnJlbnRGaWxlKVxyXG59XHJcblxyXG5cclxuLyoqIENvbnZlbmllbmNlIGZ1bmN0aW9uIHRvIGNhbGwgbW9kYWwsIHdhcm5pbmdzLCByZW1vdmUgdGFncywgYW5kIHRoZW4gY29uZmlybWF0aW9uXHJcbiAqIFxyXG4gKiBAcGFyYW0gcGx1Z2luIFxyXG4gKiBAcGFyYW0gZmlsZXMgXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiByZW1vdmVUYWdzV2l0aE1vZGFsKHBsdWdpbjogUXVpY2tUYWdQbHVnaW4sIGZpbGVzOiBURmlsZVtdKXtcclxuXHR2YXIgdGFnID0gYXdhaXQgc2VsZWN0VGFnKHBsdWdpbiwgZ2V0VGFnc09uRmlsZXMsIGZpbGVzKVxyXG5cdHJlbW92ZVRhZ3NEaXJlY3RseShwbHVnaW4sIGZpbGVzLCB0YWcpXHJcbn1cclxuXHJcblxyXG4vKiogQ29udmVuaWVuY2UgZnVuY3Rpb24gdG8gZ2V0IGFjdGl2ZSwgdGhlbiBjYWxsIHRhZyBzZWxlY3Rpb24gZGlhbG9nXHJcbiAqIFxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gcmVtb3ZlVGFnV2l0aE1vZGFsKHBsdWdpbjogUXVpY2tUYWdQbHVnaW4pe1xyXG5cdHZhciBjdXJyZW50RmlsZSA9IF9nZXRBY3RpdmVGaWxlKClcclxuXHRyZW1vdmVUYWdzV2l0aE1vZGFsKHBsdWdpbiwgY3VycmVudEZpbGUpXHJcbn1cclxuXHJcblxyXG4vKiogQWRkIG9yIHJlbW92ZSB0aGUgZ2l2ZW4gdGFnIG9uIHRoZSBhY3RpdmUgZmlsZVxyXG4gKiBcclxuICogQHBhcmFtIHRhZyBcclxuICovXHJcbmZ1bmN0aW9uIHRvZ2dsZVRhZ09uQWN0aXZlKHRhZzogc3RyaW5nKXtcclxuXHR2YXIgZmlsZSA9IF9nZXRBY3RpdmVGaWxlKClcclxuXHR2YXIgdGFnX2FkZGVkID0gX3RvZ2dsZVRhZ3MoZmlsZSwgdGFnKVxyXG5cdHRhZ19hZGRlZFswXSA/IGNvbmZpcm1hdGlvbk5vdGlmaWNhdGlvbignYWRkJywgdGFnLCBmaWxlKSA6IGNvbmZpcm1hdGlvbk5vdGlmaWNhdGlvbigncmVtb3ZlJywgdGFnLCBmaWxlKVxyXG59XHJcblxyXG5cclxuLyoqIEFkZCB0YWdzIHRvIGZpbGVzIHdpdGggYXBwcm9wcmlhdGUgd2FybmluZ3MgYW5kIG5vdGlmaWNhdGlvbnNcclxuICogXHJcbiAqIEBwYXJhbSBwbHVnaW4gXHJcbiAqIEBwYXJhbSBmaWxlcyBcclxuICogQHBhcmFtIHRhZyBcclxuICogQHJldHVybnMgXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBhZGRUYWdzRGlyZWN0bHkocGx1Z2luOiBRdWlja1RhZ1BsdWdpbiwgZmlsZXM6IFRGaWxlW10sIHRhZzogc3RyaW5nKXtcclxuXHR2YXIgYXBwbGljYWJsZUZpbGVzID0gZ2V0RmlsdGVyZWRXaXRob3V0VGFnKGZpbGVzLCB0YWcpXHJcblxyXG5cdGlmIChhcHBsaWNhYmxlRmlsZXMubGVuZ3RoID09IDApe1xyXG5cdFx0bmV3IE5vdGljZShcIk5vIGZpbGUgdGFncyB0byBjaGFuZ2UhXCIpXHJcblx0XHRyZXR1cm5cclxuXHR9XHJcblxyXG5cdHZhciBjb25maXJtID0gYXdhaXQgYWRkRGlhbG9ncygnYWRkJywgdGFnLCBhcHBsaWNhYmxlRmlsZXMubGVuZ3RoKVxyXG5cclxuXHRpZiAoY29uZmlybSB8fCBhcHBsaWNhYmxlRmlsZXMubGVuZ3RoID09IDEpe1xyXG5cdFx0YXdhaXQgX2FkZFRhZ1RvTWFueShhcHBsaWNhYmxlRmlsZXMsIHRhZy5yZXBsYWNlKCcjJywgJycpLCBwbHVnaW4pLnRoZW4oXHJcblx0XHRcdCgpID0+IGNvbmZpcm1hdGlvbk5vdGlmaWNhdGlvbignYWRkJywgdGFnLCBhcHBsaWNhYmxlRmlsZXMpXHJcblx0XHQpXHJcblx0fVxyXG59XHJcblxyXG4vKiogQ29udmVuaWVuY2UgZnVuY3Rpb24gdG8gYWRkIHRhZyBkaXJlY3RseSB0byBhIG5vdGVcclxuICogIFxyXG4gKiBAcGFyYW0gcGx1Z2luIFxyXG4gKiBAcGFyYW0gdGFnIFxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gYWRkVGFnRGlyZWN0bHkocGx1Z2luOiBRdWlja1RhZ1BsdWdpbiwgdGFnOiBzdHJpbmcpe1xyXG5cdHZhciBmaWxlID0gX2dldEFjdGl2ZUZpbGUoKVxyXG5cdGFkZFRhZ3NEaXJlY3RseShwbHVnaW4sIGZpbGUsIHRhZylcclxufVxyXG5cclxuXHJcbi8qKiBSZW1vdmUgdGFncyBmcm9tIGZpbGVzIHdpdGggYXBwcm9wcmlhdGUgd2FybmluZ3MgYW5kIG5vdGlmaWN0aW9uc1xyXG4gKiBcclxuICogQHBhcmFtIHBsdWdpbiBcclxuICogQHBhcmFtIGZpbGVzIFxyXG4gKiBAcGFyYW0gdGFnIFxyXG4gKiBAcmV0dXJucyBcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHJlbW92ZVRhZ3NEaXJlY3RseShwbHVnaW46IFF1aWNrVGFnUGx1Z2luLCBmaWxlczogVEZpbGVbXSwgdGFnOiBzdHJpbmcpe1xyXG5cdHZhciBhcHBsaWNhYmxlRmlsZXMgPSBnZXRGaWx0ZXJlZFdpdGhUYWcoZmlsZXMsIHRhZylcclxuXHJcblx0aWYgKGFwcGxpY2FibGVGaWxlcy5sZW5ndGggPT0gMCl7XHJcblx0XHRuZXcgTm90aWNlKFwiTm8gZmlsZSB0YWdzIHRvIGNoYW5nZSFcIilcclxuXHRcdHJldHVyblxyXG5cdH1cclxuXHJcblx0dmFyIGNvbmZpcm0gPSBhd2FpdCBhZGREaWFsb2dzKCdyZW1vdmUnLCB0YWcsIGFwcGxpY2FibGVGaWxlcy5sZW5ndGgpXHJcblxyXG5cdGlmIChjb25maXJtIHx8IGFwcGxpY2FibGVGaWxlcy5sZW5ndGggPT0gMSl7XHJcblx0XHRhd2FpdCBfcmVtb3ZlVGFnRnJvbU1hbnkoYXBwbGljYWJsZUZpbGVzLCB0YWcucmVwbGFjZSgnIycsICcnKSwgcGx1Z2luKS50aGVuKFxyXG5cdFx0XHQoKSA9PiBjb25maXJtYXRpb25Ob3RpZmljYXRpb24oJ3JlbW92ZScsIHRhZywgYXBwbGljYWJsZUZpbGVzKVxyXG5cdFx0KVxyXG5cdH1cclxufVxyXG5cclxuXHJcbi8qKiBDb252ZW5pZW5jZSBmdW5jdGlvbiB0byByZW1vdmUgdGFnIGRpcmVjdGx5IGZyb20gYSBub3RlXHJcbiAqIFxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gcmVtb3ZlVGFnRGlyZWN0bHkocGx1Z2luOiBRdWlja1RhZ1BsdWdpbiwgdGFnOiBzdHJpbmcpe1xyXG5cdHZhciBmaWxlID0gX2dldEFjdGl2ZUZpbGUoKVxyXG5cdHJlbW92ZVRhZ3NEaXJlY3RseShwbHVnaW4sIGZpbGUsIHRhZylcclxufVxyXG4iLCAiaW1wb3J0IHsgQXBwLCBGdXp6eVN1Z2dlc3RNb2RhbCwgTW9kYWwsIFNldHRpbmcsIE5vdGljZSwgVEZpbGUgfSBmcm9tIFwib2JzaWRpYW5cIjtcclxuaW1wb3J0IFF1aWNrVGFnUGx1Z2luLCB7UXVpY2tUYWdnZXJTZXR0aW5nc30gZnJvbSBcIi4vbWFpblwiXHJcbmV4cG9ydCB7IENvbmZpcm1Nb2RhbCwgUXVpY2tUYWdTZWxlY3RvciB9XHJcblxyXG5cclxuLyoqIFRoaXMgbW9kYWwgY2xhc3MgaGFuZGxlcyBzZWxlY3RpbmcgYSB0YWcgYW5kIHNob3VsZCBwYXNzIGEgdGFnIGJhY2sgdG8gdGhlIG1haW4gZnVuY3Rpb24uXHJcbiAqIFxyXG4gKi9cclxuY2xhc3MgUXVpY2tUYWdTZWxlY3RvciBleHRlbmRzIEZ1enp5U3VnZ2VzdE1vZGFsPHN0cmluZz4ge1xyXG4gICAgZ2F0aGVyZXI6IEZ1bmN0aW9uXHJcbiAgICBzZXR0aW5nczogUXVpY2tUYWdnZXJTZXR0aW5nc1xyXG4gICAgZmlsZUxpc3Q6IFRGaWxlW11cclxuICAgIHRhZzogc3RyaW5nXHJcblxyXG4gICAgXHJcbiAgICBjb25zdHJ1Y3RvciAocGx1Z2luOiBRdWlja1RhZ1BsdWdpbiwgZ2F0aGVyZXI6IEZ1bmN0aW9uLCBmaWxlTGlzdDogQXJyYXk8VEZpbGU+KXtcclxuICAgICAgICBzdXBlcihwbHVnaW4uYXBwKVxyXG4gICAgICAgIHRoaXMuZ2F0aGVyZXIgPSBnYXRoZXJlclxyXG4gICAgICAgIHRoaXMuc2V0dGluZ3MgPSBwbHVnaW4uc2V0dGluZ3NcclxuICAgICAgICB0aGlzLmZpbGVMaXN0ID0gZmlsZUxpc3RcclxuICAgICAgICB0aGlzLnRhZyA9ICcnXHJcbiAgICB9XHJcblxyXG4gICAgZ2V0SXRlbXMoKTogc3RyaW5nW10ge1xyXG4gICAgICAgIGlmKCF0aGlzLmdhdGhlcmVyKXtcclxuICAgICAgICAgICAgbmV3IE5vdGljZShcIkVycm9yOiBDb3VsZCBub3QgZmluZCB0YWdzIVwiKVxyXG4gICAgICAgICAgICByZXR1cm4gW11cclxuICAgICAgICB9IFxyXG5cclxuICAgICAgICB2YXIgcmVzdWx0cyA9IHRoaXMuZ2F0aGVyZXIodGhpcy5zZXR0aW5ncywgdGhpcy5maWxlTGlzdClcclxuICAgICAgICByZXR1cm4gcmVzdWx0c1xyXG4gICAgfVxyXG5cclxuICAgIGdldEl0ZW1UZXh0KHRhZzogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdGFnXHJcbiAgICB9XHJcblxyXG4gICAgLy8gdGhpcyBzaG91bGQgYmUgb3ZlcndyaXR0ZW4gd2hlbiBjYWxsZWQgdG8gaG9vayBpbnRvIGEgcHJvbWlzZSdzIHJlc29sdmVcclxuICAgIGFzeW5jIG9uQ2hvb3NlSXRlbSh0YWc6IHN0cmluZykge1xyXG4gICAgICAgIHRoaXMudGFnID0gdGFnXHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5jbGFzcyBDb25maXJtTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XHJcbiAgICBvblN1Ym1pdDogKHJlc3VsdDogYm9vbGVhbikgPT4gdm9pZDtcclxuICAgIG1lc3NhZ2U6IHN0cmluZ1xyXG5cclxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgb25TdWJtaXQ6IChyZXN1bHQ6IGJvb2xlYW4pID0+IHZvaWQsIG1lc3NhZ2U6IHN0cmluZykge1xyXG5cdFx0c3VwZXIoYXBwKTtcclxuICAgICAgICB0aGlzLm9uU3VibWl0ID0gb25TdWJtaXRcclxuICAgICAgICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlXHJcblx0fVxyXG5cclxuXHRvbk9wZW4oKSB7XHJcblx0XHRjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoXCJoMVwiLCB7IHRleHQ6IHRoaXMubWVzc2FnZSB9KVxyXG5cdFx0XHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKS5hZGRCdXR0b24oKGJ0bikgPT5cclxuICAgICAgICAgIGJ0blxyXG4gICAgICAgICAgICAuc2V0QnV0dG9uVGV4dChcIlllc1wiKVxyXG4gICAgICAgICAgICAuc2V0Q3RhKClcclxuICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpXHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uU3VibWl0KHRydWUpXHJcbiAgICAgICAgICAgIH0pKVxyXG4gICAgICAgIC5hZGRCdXR0b24oKGJ0bikgPT5cclxuICAgICAgICAgIGJ0blxyXG4gICAgICAgICAgICAuc2V0QnV0dG9uVGV4dChcIk5vXCIpXHJcbiAgICAgICAgICAgIC5zZXRDdGEoKVxyXG4gICAgICAgICAgICAub25DbGljaygoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKClcclxuICAgICAgICAgICAgICAgIHRoaXMub25TdWJtaXQoZmFsc2UpXHJcbiAgICAgICAgICAgIH0pKVxyXG5cdH1cclxuXHJcblx0YXN5bmMgb25DbG9zZSgpIHtcclxuXHRcdGNvbnN0IHtjb250ZW50RWx9ID0gdGhpcztcclxuXHRcdGNvbnRlbnRFbC5lbXB0eSgpO1xyXG5cdH1cclxuXHJcbn0iLCAiLy8gVGhpcyBmaWxlIGhvbGRzIGZ1bmN0aW9ucyB1c2VkIHRvIHBvcHVsYXRlIHRoZSB0YWcgc2VsZWN0b3IgbW9kYWxcclxuaW1wb3J0IHsgUXVpY2tUYWdnZXJTZXR0aW5ncywgU3RhcnJlZFRhZyB9IGZyb20gXCIuL21haW5cIlxyXG5pbXBvcnQgeyBURmlsZSwgcGFyc2VGcm9udE1hdHRlclRhZ3MgfSBmcm9tIFwib2JzaWRpYW5cIlxyXG5leHBvcnQgeyBnZXRUYWdMaXN0LCBnZXRUYWdzT25GaWxlcywgZ2V0Tm9uU3RhcnJlZFRhZ3MgfVxyXG5cclxuLyoqIEJ1aWxkIGEgbGlzdCBvZiB0YWdzIHN0YXJ0aW5nIHdpdGggY29uZmlndXJlZCBzdGFycmVkIHRhZ3MuIFVzZWQgZm9yIGFkZGluZyB0YWdzIHRvIG5vdGVzLlxyXG4gKiBJZiB0aGUgb3B0aW9uIGlzIHNldCwgYWRkIGFsbCB0YWdzIGluIE9ic2lkaWFuIHRvIHRoZSBsaXN0IGFzXHJcbiAqIHdlbGwuXHJcbiAqIFxyXG4gKiBAcGFyYW0gc2V0dGluZ3MgXHJcbiAqIEBwYXJhbSBmaWxlTGlzdFxyXG4gKiBAcmV0dXJucyBzdHJpbmdbXSBvZiB0YWdzXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRUYWdMaXN0KHNldHRpbmdzOiBRdWlja1RhZ2dlclNldHRpbmdzLCBmaWxlTGlzdD86VEZpbGVbXSl7XHJcblx0Ly8gVE9ETzogYWRkIGZpbHRlcmluZyB0byByZW1vdmUgdGFncyB0aGF0IGFyZSBhbHJlYWR5IG9uIHRoZSBhY3RpdmUgZmlsZT9cclxuXHR2YXIgdGFnU2V0dGluZ3MgPSBnZXRTdGFycmVkVGFncyhzZXR0aW5ncywgJ2N1dF9pbl9saW5lJylcclxuXHR2YXIgdGFnX2FycmF5ID0gdGFnU2V0dGluZ3MubWFwKChlKSA9PiBlLnJlcGxhY2UoJyMnLCAnJykpXHJcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZpbHRlcigoZSkgPT4gZSlcclxuXHRcdFx0XHRcdFx0XHQgICAubWFwKChlKSA9PiAnIycgKyBlKVxyXG5cdFxyXG5cdGlmICghc2V0dGluZ3MuYWxsX3RhZ3Mpe1xyXG5cdFx0cmV0dXJuIHRhZ19hcnJheVxyXG5cdH1cclxuXHRcclxuICAgIHZhciB0YWdfY2FjaGUgPSBnZXRUYWdzRnJvbUFwcENhY2hlKClcclxuXHR0YWdfY2FjaGUuc29ydCgpXHJcblx0dGFnX2NhY2hlLmZvckVhY2godGFnID0+IHtcclxuXHRcdGlmICh0YWdfYXJyYXkuaW5kZXhPZih0YWcpID09IC0xKXtcclxuXHRcdFx0dGFnX2FycmF5LnB1c2godGFnKVxyXG5cdFx0fVxyXG5cdH0pXHJcblx0cmV0dXJuIHRhZ19hcnJheVxyXG59XHJcblxyXG5cclxuLyoqIEJ1aWxkIGEgbGlzdCBvZiB0YWdzIGZyb20gdGhlIGdpdmVuIGZpbGVzLiBVc2VkIGZvciByZW1vdmluZyB0YWdzIGZyb20gbm90ZXMuXHJcbiAqIFxyXG4gKiBAcGFyYW0gc2V0dGluZ3MgXHJcbiAqIEBwYXJhbSBmaWxlTGlzdFxyXG4gKiBAcmV0dXJucyBcclxuICovXHJcbmZ1bmN0aW9uIGdldFRhZ3NPbkZpbGVzKHNldHRpbmdzOiBRdWlja1RhZ2dlclNldHRpbmdzLCBmaWxlTGlzdDpURmlsZVtdKXtcclxuXHR2YXIgdGFnX2FycmF5ID0gW10gYXMgc3RyaW5nW11cclxuXHRmaWxlTGlzdC5mb3JFYWNoKChmKSA9PntcclxuXHRcdHZhciBjYWNoZSA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGYpXHJcblx0XHR2YXIgbmV3X3RhZ3MgPSBwYXJzZUZyb250TWF0dGVyVGFncyhjYWNoZS5mcm9udG1hdHRlcilcclxuXHRcdGlmKG5ld190YWdzKXtcclxuXHRcdFx0bmV3X3RhZ3MubWFwKChlKSA9PiBlLnJlcGxhY2UoJyMnLCAnJykpLmZpbHRlcigoZSkgPT4gZSkubWFwKChlKSA9PiAnIycgKyBlKVxyXG5cdFx0XHRuZXdfdGFncy5mb3JFYWNoKChpdGVtKSA9PntcclxuXHRcdFx0XHQhdGFnX2FycmF5LmluY2x1ZGVzKGl0ZW0pID8gdGFnX2FycmF5LnB1c2goaXRlbSkgOiB1bmRlZmluZWRcclxuXHRcdFx0fSlcclxuXHRcdH1cclxuXHR9KVxyXG5cdHRhZ19hcnJheS5wdXNoKCdSRU1PVkUgQUxMJylcclxuXHRyZXR1cm4gdGFnX2FycmF5XHJcbn1cclxuXHJcblxyXG4vKiogVXNlZCBmb3Igc2VsZWN0aW5nIG5ldyBzdGFycmVkIHRhZ3MuXHJcbiAqIEJ1aWxkIGEgbGlzdCBvZiB0YWdzIGluIE9ic2lkaWFuIF9leGNsdWRpbmdfIHN0YXJyZWQgdGFncy4gXHJcbiAqIFxyXG4gKiBAcGFyYW0gc2V0dGluZ3NcclxuICogQHBhcmFtIGZpbGVMaXN0IFxyXG4gKiBAcmV0dXJucyBcclxuICovXHJcbmZ1bmN0aW9uIGdldE5vblN0YXJyZWRUYWdzKHNldHRpbmdzOiBRdWlja1RhZ2dlclNldHRpbmdzLCBmaWxlTGlzdD86VEZpbGVbXSl7XHJcblx0dmFyIHRhZ19hcnJheSA9IGdldFRhZ3NGcm9tQXBwQ2FjaGUoKVxyXG5cdHZhciBzdGFycmVkVGFncyA9IGdldFN0YXJyZWRUYWdzKHNldHRpbmdzKVxyXG5cdHN0YXJyZWRUYWdzLmZvckVhY2godCA9PiB0YWdfYXJyYXkucmVtb3ZlKHQpKVxyXG5cdHRhZ19hcnJheS5zb3J0KClcclxuXHRyZXR1cm4gdGFnX2FycmF5XHJcbn1cclxuXHJcblxyXG4vKiogQnVpbGQgYSBsaXN0IG9mIHN0YXJyZWQgdGFncyBmcm9tIHRoZSBwbHVnaW4gc2V0dGluZ3NcclxuICogXHJcbiAqIEBwYXJhbSBzZXR0aW5ncyBcclxuICogQHBhcmFtIGZpbHRlciBhIGtleSBvZiB0aGUgU3RhcnJlZFRhZyBzZXR0aW5ncyB0byBmaWx0ZXIgb25seSBwcmlvcml0eSB0YWdzIHRoYXQgYXJlIGVuYWJsZWQuXHJcbiAqIEByZXR1cm5zIFxyXG4gKi9cclxuZnVuY3Rpb24gZ2V0U3RhcnJlZFRhZ3Moc2V0dGluZ3M6IFF1aWNrVGFnZ2VyU2V0dGluZ3MsIGZpbHRlcl9rZXk/OnN0cmluZyl7XHJcblx0dmFyIHJlc3VsdHMgPSBbXSBhcyBzdHJpbmdbXVxyXG5cdHNldHRpbmdzLnByaW9yaXR5VGFncy5mb3JFYWNoKCh0KSA9PiB7XHJcbiAgICAgICAgaWYoZmlsdGVyX2tleSl7XHJcbiAgICAgICAgICAgIC8vIGlmIHRoZSBzZXR0aW5ncyBhcmUgbm90IGVuYWJsZWQgZm9yICdmaWx0ZXJfa2V5Jywgc2tpcCBhZGRpbmcgdGFnIHRvIHJlc3VsdCBsaXN0XHJcbiAgICAgICAgICAgIHRbZmlsdGVyX2tleSBhcyBrZXlvZiBTdGFycmVkVGFnXSA/IHJlc3VsdHMucHVzaCh0LnRhZ192YWx1ZSkgOiBudWxsXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmVzdWx0cy5wdXNoKHQudGFnX3ZhbHVlKVxyXG4gICAgICAgIH1cclxuICAgIH0pXHJcblx0cmV0dXJuIHJlc3VsdHNcclxufVxyXG5cclxuXHJcbi8qKiBDb252ZW5pbmVjZSBmdW5jdGlvbiB0byBjb252ZXJ0IHRoZSBtZXRhZGF0YSBjYWNoZSB0byBhIGxpc3Qgb2Ygc3RyaW5nc1xyXG4gKiBcclxuICogQHJldHVybnMgc3RyaW5nW10gb2YgdGFnc1xyXG4gKi9cclxuZnVuY3Rpb24gZ2V0VGFnc0Zyb21BcHBDYWNoZSgpe1xyXG5cdHZhciByZXN1bHRzID0gW10gYXMgc3RyaW5nW11cclxuXHRmb3IgKGNvbnN0IGtleSBpbiBhcHAubWV0YWRhdGFDYWNoZS5nZXRUYWdzKCkpe1xyXG5cdFx0cmVzdWx0cy5wdXNoKGtleSlcclxuXHR9XHJcblx0cmV0dXJuIHJlc3VsdHNcclxufSIsICIvLyB0aGlzIGZpbGUgaG9sZHMgZnVuY3Rpb25zIHRvIGZpbHRlciB0aGUgZmlsZXMgYmFzZWQgb24gdGFnIGFuZCBvdGhlciBjcml0ZXJpYVxyXG5pbXBvcnQgeyBURmlsZSwgcGFyc2VGcm9udE1hdHRlclRhZ3MgfSBmcm9tIFwib2JzaWRpYW5cIlxyXG5leHBvcnQgeyBnZXRGaWx0ZXJlZFdpdGhUYWcsIGdldEZpbHRlcmVkV2l0aG91dFRhZywgZmlsdGVyVGFnLCBvbmx5VGFnZ2FibGVGaWxlcyB9XHJcblxyXG5cclxuY29uc3QgU1BFQ0lBTF9DT01NQU5EUyA9IFsnUkVNT1ZFIEFMTCddXHJcblxyXG5cclxuLyoqIEZpbHRlcnMgYXJyYXkgb2YgZmlsZXMgdG8gb25seSB0aG9zZSB0aGF0IERPIGhhdmUgdGhlIGdpdmVuIHRhZ1xyXG4gKiBcclxuICogQHBhcmFtIGZpbGVMaXN0IFxyXG4gKiBAcGFyYW0gdGFnIFxyXG4gKiBAcmV0dXJucyBcclxuICovXHJcbmZ1bmN0aW9uIGdldEZpbHRlcmVkV2l0aFRhZyhmaWxlTGlzdDpURmlsZVtdLCB0YWc6c3RyaW5nKXtcclxuICAgIC8vIGVhcmx5IGV4aXQgaWYgdGhlIFwidGFnXCIgaXMgYSBzcGVjaWFsIGNvbW1hbmQuXHJcblx0aWYgKFNQRUNJQUxfQ09NTUFORFMuaW5jbHVkZXModGFnKSl7IHJldHVybiBmaWxlTGlzdCB9XHJcblxyXG5cdHZhciByZXN1bHRMaXN0ID0gZmlsZUxpc3QuZmlsdGVyKGZpbGUgPT4gZmlsdGVyVGFnKGZpbGUsIHRhZykgPT0gdHJ1ZSlcclxuXHRyZXR1cm4gcmVzdWx0TGlzdFxyXG59XHJcblxyXG5cclxuLyoqIEZpbHRlcnMgYXJyYXkgb2YgZmlsZXMgdG8gb25seSB0aG9zZSB0aGF0IERPIE5PVCBoYXZlIHRoZSBnaXZlbiB0YWdcclxuICogXHJcbiAqIEBwYXJhbSBmaWxlTGlzdCBcclxuICogQHBhcmFtIHRhZyBcclxuICogQHJldHVybnMgVEZpbGVbXVxyXG4gKi9cclxuZnVuY3Rpb24gZ2V0RmlsdGVyZWRXaXRob3V0VGFnKGZpbGVMaXN0OlRGaWxlW10sIHRhZzpzdHJpbmcpe1xyXG4gICAgLy8gZWFybHkgZXhpdCBpZiB0aGUgXCJ0YWdcIiBpcyBhIHNwZWNpYWwgY29tbWFuZC5cclxuXHRpZiAoU1BFQ0lBTF9DT01NQU5EUy5pbmNsdWRlcyh0YWcpKXsgcmV0dXJuIGZpbGVMaXN0IH1cclxuXHJcblx0dmFyIHJlc3VsdExpc3QgPSBmaWxlTGlzdC5maWx0ZXIoZmlsZSA9PiBmaWx0ZXJUYWcoZmlsZSwgdGFnKSA9PSBmYWxzZSlcclxuXHRyZXR1cm4gcmVzdWx0TGlzdFxyXG59XHJcblxyXG5cclxuLyoqIEdldCBub3RlIGNhY2hlIGFuZCByZXR1cm4gdHJ1ZS9mYWxzZSBpZiBpdCBpbmNsdWRlcyBnaXZlbiB0YWdcclxuICogXHJcbiAqIEBwYXJhbSB0aGlzRmlsZSBcclxuICogQHBhcmFtIHRhZyBcclxuICogQHJldHVybnMgXHJcbiAqL1xyXG5mdW5jdGlvbiBmaWx0ZXJUYWcodGhpc0ZpbGU6IFRGaWxlLCB0YWc6IHN0cmluZyl7XHJcblx0dmFyIGNhY2hlID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUodGhpc0ZpbGUpXHJcblx0dmFyIGV4aXN0aW5nX3RhZ3MgPSBwYXJzZUZyb250TWF0dGVyVGFncyhjYWNoZS5mcm9udG1hdHRlcilcclxuXHRpZiAoZXhpc3RpbmdfdGFncz8uaW5jbHVkZXModGFnKSl7XHJcblx0XHRyZXR1cm4gdHJ1ZVxyXG5cdH0gZWxzZSB7XHJcblx0XHRyZXR1cm4gZmFsc2VcclxuXHR9XHJcbn1cclxuXHJcblxyXG4vKiogRmlsdGVyIG91dCBmb2xkZXJzIGFuZCBub24gbWFya2Rvd24gZmlsZXNcclxuICogXHJcbiAqIEBwYXJhbSBmaWxlTGlzdCBcclxuICogQHJldHVybnMgXHJcbiAqL1xyXG5mdW5jdGlvbiBvbmx5VGFnZ2FibGVGaWxlcyhmaWxlTGlzdDogVEZpbGVbXSl7XHJcblx0dmFyIHJlc3VsdExpc3QgPSBmaWxlTGlzdC5maWx0ZXIoZmlsZSA9PiAoZmlsZS5leHRlbnNpb24gPyB0cnVlIDogZmFsc2UpID09IHRydWUgJiYgZmlsZS5leHRlbnNpb24gPT0gXCJtZFwiKVxyXG5cdHJldHVybiByZXN1bHRMaXN0XHJcbn0iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsSUFBQUEsbUJBQXNFOzs7QUNBdEUsSUFBQUMsbUJBQXdDOzs7QUNBeEMsc0JBQXNFO0FBUXRFLElBQU0sbUJBQU4sY0FBK0Isa0NBQTBCO0FBQUEsRUFPckQsWUFBYSxRQUF3QixVQUFvQixVQUF1QjtBQUM1RSxVQUFNLE9BQU8sR0FBRztBQUNoQixTQUFLLFdBQVc7QUFDaEIsU0FBSyxXQUFXLE9BQU87QUFDdkIsU0FBSyxXQUFXO0FBQ2hCLFNBQUssTUFBTTtBQUFBLEVBQ2Y7QUFBQSxFQUVBLFdBQXFCO0FBQ2pCLFFBQUcsQ0FBQyxLQUFLLFVBQVM7QUFDZCxVQUFJLHVCQUFPLDZCQUE2QjtBQUN4QyxhQUFPLENBQUM7QUFBQSxJQUNaO0FBRUEsUUFBSSxVQUFVLEtBQUssU0FBUyxLQUFLLFVBQVUsS0FBSyxRQUFRO0FBQ3hELFdBQU87QUFBQSxFQUNYO0FBQUEsRUFFQSxZQUFZLEtBQXFCO0FBQzdCLFdBQU87QUFBQSxFQUNYO0FBQUE7QUFBQSxFQUdBLE1BQU0sYUFBYSxLQUFhO0FBQzVCLFNBQUssTUFBTTtBQUFBLEVBQ2Y7QUFDSjtBQUdBLElBQU0sZUFBTixjQUEyQixzQkFBTTtBQUFBLEVBSWhDLFlBQVlDLE1BQVUs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
